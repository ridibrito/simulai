{"file_contents":{"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/pages/landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  Brain, \n  FileText, \n  Target, \n  BarChart3, \n  Sparkles, \n  CheckCircle2,\n  ArrowRight,\n  BookOpen,\n  Zap,\n  Shield\n} from \"lucide-react\";\n\nexport default function Landing() {\n  const features = [\n    {\n      icon: FileText,\n      title: \"Simulados Personalizados\",\n      description: \"Crie simulados a partir de PDFs, anotações e questões reais de concursos, ENEM e vestibulares.\"\n    },\n    {\n      icon: Brain,\n      title: \"IA Adaptativa\",\n      description: \"Questões que se adaptam ao seu nível. A IA identifica suas dificuldades e sugere conteúdos específicos.\"\n    },\n    {\n      icon: Sparkles,\n      title: \"Correção Inteligente\",\n      description: \"Correção automática com explicações didáticas e feedback personalizado gerado por IA.\"\n    },\n    {\n      icon: BookOpen,\n      title: \"Resumos Automáticos\",\n      description: \"IA gera resumos claros e objetivos dos seus materiais de estudo, PDFs e anotações.\"\n    },\n    {\n      icon: BarChart3,\n      title: \"Dashboard Completo\",\n      description: \"Gráficos, estatísticas e relatórios de progresso em tempo real para acompanhar sua evolução.\"\n    },\n    {\n      icon: Target,\n      title: \"Foco nos Pontos Fracos\",\n      description: \"Identificamos suas áreas de dificuldade e direcionamos seu estudo para máxima eficiência.\"\n    }\n  ];\n\n  const stats = [\n    { value: \"50k+\", label: \"Questões\" },\n    { value: \"98%\", label: \"Satisfação\" },\n    { value: \"15k+\", label: \"Aprovados\" },\n    { value: \"200+\", label: \"Concursos\" }\n  ];\n\n  const steps = [\n    { number: \"01\", title: \"Cadastre-se\", description: \"Crie sua conta gratuita em segundos\" },\n    { number: \"02\", title: \"Envie seu Material\", description: \"Faça upload de PDFs ou escolha questões do banco\" },\n    { number: \"03\", title: \"Estude com IA\", description: \"Receba simulados e resumos personalizados\" },\n    { number: \"04\", title: \"Seja Aprovado\", description: \"Acompanhe seu progresso até a conquista\" }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n        <div className=\"container mx-auto flex h-16 items-center justify-between gap-4 px-4\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex h-9 w-9 items-center justify-center rounded-md bg-primary\">\n              <Brain className=\"h-5 w-5 text-primary-foreground\" />\n            </div>\n            <span className=\"text-xl font-bold\" data-testid=\"text-logo\">Simulai</span>\n          </div>\n          <nav className=\"hidden md:flex items-center gap-6\">\n            <a href=\"#features\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              Recursos\n            </a>\n            <a href=\"#how-it-works\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              Como Funciona\n            </a>\n            <a href=\"#pricing\" className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\">\n              Planos\n            </a>\n          </nav>\n          <div className=\"flex items-center gap-3\">\n            <a href=\"/api/login\">\n              <Button variant=\"ghost\" data-testid=\"button-login\">Entrar</Button>\n            </a>\n            <a href=\"/api/login\">\n              <Button data-testid=\"button-signup\">Começar Grátis</Button>\n            </a>\n          </div>\n        </div>\n      </header>\n\n      <section className=\"relative overflow-hidden py-20 md:py-32\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-chart-2/5\" />\n        <div className=\"container mx-auto px-4 relative\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <Badge variant=\"secondary\" className=\"mb-6\">\n              <Zap className=\"h-3 w-3 mr-1\" />\n              Potencializado por Inteligência Artificial\n            </Badge>\n            <h1 className=\"text-4xl md:text-6xl font-bold tracking-tight mb-6\" data-testid=\"text-hero-title\">\n              Prepare-se para Concursos com{\" \"}\n              <span className=\"text-primary\">Inteligência Artificial</span>\n            </h1>\n            <p className=\"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto\">\n              Simulados personalizados, correção inteligente e resumos automáticos. \n              Tudo o que você precisa para conquistar sua aprovação.\n            </p>\n            <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4\">\n              <a href=\"/api/login\">\n                <Button size=\"lg\" className=\"gap-2\" data-testid=\"button-hero-cta\">\n                  Começar Grátis\n                  <ArrowRight className=\"h-4 w-4\" />\n                </Button>\n              </a>\n              <a href=\"#features\">\n                <Button size=\"lg\" variant=\"outline\" data-testid=\"button-hero-secondary\">\n                  Ver Recursos\n                </Button>\n              </a>\n            </div>\n          </div>\n\n          <div className=\"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 max-w-3xl mx-auto\">\n            {stats.map((stat, index) => (\n              <div key={index} className=\"text-center\">\n                <div className=\"text-3xl md:text-4xl font-bold text-primary\" data-testid={`stat-value-${index}`}>\n                  {stat.value}\n                </div>\n                <div className=\"text-sm text-muted-foreground mt-1\">{stat.label}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section id=\"features\" className=\"py-20 bg-card/50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">\n              Tudo que você precisa para estudar\n            </h2>\n            <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n              Ferramentas poderosas impulsionadas por IA para otimizar seus estudos e maximizar suas chances de aprovação.\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {features.map((feature, index) => (\n              <Card key={index} className=\"hover-elevate transition-all duration-200\" data-testid={`card-feature-${index}`}>\n                <CardContent className=\"p-6\">\n                  <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4\">\n                    <feature.icon className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <h3 className=\"text-lg font-semibold mb-2\">{feature.title}</h3>\n                  <p className=\"text-muted-foreground\">{feature.description}</p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section id=\"how-it-works\" className=\"py-20\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">\n              Como Funciona\n            </h2>\n            <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n              Em poucos passos você estará estudando de forma inteligente e eficiente.\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {steps.map((step, index) => (\n              <div key={index} className=\"relative\" data-testid={`step-${index}`}>\n                <div className=\"text-6xl font-bold text-primary/10 mb-4\">{step.number}</div>\n                <h3 className=\"text-xl font-semibold mb-2\">{step.title}</h3>\n                <p className=\"text-muted-foreground\">{step.description}</p>\n                {index < steps.length - 1 && (\n                  <div className=\"hidden lg:block absolute top-8 right-0 w-full h-0.5 bg-gradient-to-r from-primary/20 to-transparent translate-x-1/2\" />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section id=\"pricing\" className=\"py-20 bg-card/50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">\n              Planos que cabem no seu bolso\n            </h2>\n            <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n              Escolha o plano ideal para sua jornada de estudos.\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto\">\n            <Card className=\"relative\" data-testid=\"card-plan-free\">\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-xl font-semibold mb-2\">Gratuito</h3>\n                <div className=\"mb-4\">\n                  <span className=\"text-4xl font-bold\">R$0</span>\n                  <span className=\"text-muted-foreground\">/mês</span>\n                </div>\n                <ul className=\"space-y-3 mb-6\">\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">10 simulados por mês</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Banco com 1.000 questões</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Dashboard básico</span>\n                  </li>\n                </ul>\n                <a href=\"/api/login\">\n                  <Button variant=\"outline\" className=\"w-full\">Começar Grátis</Button>\n                </a>\n              </CardContent>\n            </Card>\n\n            <Card className=\"relative border-primary\" data-testid=\"card-plan-pro\">\n              <div className=\"absolute -top-3 left-1/2 -translate-x-1/2\">\n                <Badge>Mais Popular</Badge>\n              </div>\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-xl font-semibold mb-2\">Pro</h3>\n                <div className=\"mb-4\">\n                  <span className=\"text-4xl font-bold\">R$29</span>\n                  <span className=\"text-muted-foreground\">/mês</span>\n                </div>\n                <ul className=\"space-y-3 mb-6\">\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Simulados ilimitados</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Banco com 50.000+ questões</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">IA Adaptativa completa</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Resumos automáticos de PDFs</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Correção de dissertativas</span>\n                  </li>\n                </ul>\n                <a href=\"/api/login\">\n                  <Button className=\"w-full\">Assinar Pro</Button>\n                </a>\n              </CardContent>\n            </Card>\n\n            <Card className=\"relative\" data-testid=\"card-plan-enterprise\">\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-xl font-semibold mb-2\">Enterprise</h3>\n                <div className=\"mb-4\">\n                  <span className=\"text-4xl font-bold\">R$99</span>\n                  <span className=\"text-muted-foreground\">/mês</span>\n                </div>\n                <ul className=\"space-y-3 mb-6\">\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Tudo do Pro</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Mentoria com IA avançada</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Cronograma personalizado</span>\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4 text-chart-2\" />\n                    <span className=\"text-sm\">Suporte prioritário</span>\n                  </li>\n                </ul>\n                <a href=\"/api/login\">\n                  <Button variant=\"outline\" className=\"w-full\">Falar com Vendas</Button>\n                </a>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-4\">\n          <Card className=\"bg-primary text-primary-foreground overflow-hidden\">\n            <CardContent className=\"p-8 md:p-12 text-center relative\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-primary via-primary to-chart-1/80\" />\n              <div className=\"relative\">\n                <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">\n                  Pronto para conquistar sua vaga?\n                </h2>\n                <p className=\"text-primary-foreground/80 text-lg mb-8 max-w-xl mx-auto\">\n                  Junte-se a milhares de estudantes que já estão usando IA para acelerar seus estudos.\n                </p>\n                <a href=\"/api/login\">\n                  <Button size=\"lg\" variant=\"secondary\" className=\"gap-2\" data-testid=\"button-cta-final\">\n                    Começar Agora\n                    <ArrowRight className=\"h-4 w-4\" />\n                  </Button>\n                </a>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <footer className=\"border-t py-12\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-md bg-primary\">\n                <Brain className=\"h-4 w-4 text-primary-foreground\" />\n              </div>\n              <span className=\"font-semibold\">Simulai</span>\n            </div>\n            <div className=\"flex items-center gap-6 text-sm text-muted-foreground\">\n              <a href=\"#\" className=\"hover:text-foreground transition-colors\">Termos de Uso</a>\n              <a href=\"#\" className=\"hover:text-foreground transition-colors\">Privacidade</a>\n              <a href=\"#\" className=\"hover:text-foreground transition-colors\">Contato</a>\n            </div>\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Shield className=\"h-4 w-4\" />\n              <span>Dados protegidos</span>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","path":null,"size_bytes":15995,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"replit.md":{"content":"# ConcurseIA - Brazilian Exam Preparation Platform\n\n## Overview\n\nConcurseIA is a full-stack web application designed to help Brazilian students prepare for competitive public exams (concursos públicos), ENEM, and vestibulares. The platform leverages AI to generate personalized practice exams, provide intelligent feedback, create study material summaries, and track learning progress through comprehensive analytics dashboards.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Routing**: Wouter (lightweight alternative to React Router)\n- **State Management**: TanStack React Query for server state\n- **UI Components**: shadcn/ui component library built on Radix UI primitives\n- **Styling**: Tailwind CSS with custom design tokens and dark/light theme support\n- **Charts**: Recharts for data visualization\n- **Forms**: React Hook Form with Zod validation\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js\n- **Language**: TypeScript with ESM modules\n- **API Pattern**: RESTful JSON API under `/api` prefix\n- **Authentication**: Replit OpenID Connect (OIDC) with Passport.js\n- **Session Management**: Express sessions stored in PostgreSQL via connect-pg-simple\n\n### Data Storage\n- **Database**: PostgreSQL\n- **ORM**: Drizzle ORM with drizzle-zod for schema validation\n- **Schema Location**: `shared/schema.ts` (shared between client and server)\n- **Migrations**: Managed via drizzle-kit with `db:push` command\n\n### Key Design Decisions\n\n1. **Monorepo Structure**: Client (`client/`), server (`server/`), and shared code (`shared/`) in single repository for type safety across stack boundaries.\n\n2. **Shared Schema**: Database schema defined once in `shared/schema.ts` and used for both database operations and API validation, ensuring type consistency.\n\n3. **Build System**: Vite for frontend development/bundling, esbuild for production server bundling with selective dependency bundling for faster cold starts.\n\n4. **Portuguese Localization**: UI text, date formatting, and content are in Brazilian Portuguese (pt-BR).\n\n5. **Design System**: Utility-focused design system inspired by Linear and Notion, prioritizing clarity for study environments with comprehensive CSS custom properties for theming.\n\n## External Dependencies\n\n### AI Services\n- **Google Gemini AI** (`@google/genai`): Powers question generation, essay evaluation, study recommendations, material summarization, and question explanations\n- Requires `GEMINI_API_KEY` environment variable\n\n### Database\n- **PostgreSQL**: Primary data store\n- Requires `DATABASE_URL` environment variable\n- Tables: users, sessions, subjects, questions, materials, exams, exam_attempts, question_answers, user_performance, ai_recommendations\n\n### Authentication\n- **Replit OIDC**: OAuth2/OpenID Connect authentication\n- Requires `REPL_ID`, `ISSUER_URL`, and `SESSION_SECRET` environment variables\n\n### Payment Processing\n- **Stripe** (configured but implementation partial): Subscription management for Pro tier\n- Schema includes `stripeCustomerId` and `stripeSubscriptionId` fields\n\n### Frontend Libraries\n- Full shadcn/ui component set with Radix UI primitives\n- TanStack Query for data fetching\n- Recharts for performance analytics visualization\n- date-fns for date manipulation","path":null,"size_bytes":3372,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\nimport * as schema from \"@shared/schema\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":395,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}\n","path":null,"size_bytes":307,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/pages/subscription.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  CheckCircle2,\n  Crown,\n  Sparkles,\n  Zap,\n  CreditCard,\n  Shield,\n  ArrowRight,\n  Loader2,\n  ExternalLink,\n} from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\n\ninterface PlanDetails {\n  name: string;\n  price: number;\n  priceFormatted: string;\n  simuladosLimit: number;\n  priceId?: string;\n  savings?: string;\n  features: string[];\n}\n\ninterface PlansResponse {\n  free: PlanDetails;\n  monthly: PlanDetails;\n  annual: PlanDetails;\n}\n\nexport default function Subscription() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [location] = useLocation();\n  const currentPlan = user?.subscriptionTier || \"free\";\n\n  const { data: plans, isLoading: plansLoading } = useQuery<PlansResponse>({\n    queryKey: [\"/api/subscription/plans\"],\n  });\n\n  const checkoutMutation = useMutation({\n    mutationFn: async (planType: \"monthly\" | \"annual\") => {\n      const response = await apiRequest(\"POST\", \"/api/subscription/create-checkout\", { planType });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao iniciar o checkout. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const portalMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/subscription/create-portal\");\n      return response.json();\n    },\n    onSuccess: (data) => {\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao acessar o portal. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get(\"success\") === \"true\") {\n      toast({\n        title: \"Assinatura ativada\",\n        description: \"Sua assinatura foi ativada com sucesso!\",\n      });\n      window.history.replaceState({}, \"\", \"/subscription\");\n    } else if (urlParams.get(\"canceled\") === \"true\") {\n      toast({\n        title: \"Checkout cancelado\",\n        description: \"O processo de checkout foi cancelado.\",\n        variant: \"destructive\",\n      });\n      window.history.replaceState({}, \"\", \"/subscription\");\n    }\n  }, [location, toast]);\n\n  const handleSubscribe = (planType: \"monthly\" | \"annual\") => {\n    checkoutMutation.mutate(planType);\n  };\n\n  const handleManageSubscription = () => {\n    portalMutation.mutate();\n  };\n\n  const plansList = [\n    {\n      id: \"free\",\n      name: \"Gratuito\",\n      price: \"R$ 0\",\n      period: \"\",\n      description: \"Para experimentar a plataforma\",\n      features: plans?.free.features || [\n        \"1 simulado gratuito\",\n        \"Acesso a questões de exemplo\",\n        \"Estatísticas básicas\",\n      ],\n      popular: false,\n      isCurrent: currentPlan === \"free\",\n    },\n    {\n      id: \"monthly\",\n      name: \"Mensal\",\n      price: \"R$ 39\",\n      period: \"/mês\",\n      description: \"Acesso completo mensal\",\n      features: plans?.monthly.features || [\n        \"Simulados ilimitados\",\n        \"Questões geradas por IA\",\n        \"Avaliação de redações por IA\",\n        \"Recomendações personalizadas\",\n        \"Estatísticas avançadas\",\n      ],\n      popular: false,\n      isCurrent: currentPlan === \"monthly\",\n    },\n    {\n      id: \"annual\",\n      name: \"Anual\",\n      price: \"R$ 19\",\n      period: \"/mês\",\n      description: \"Cobrado anualmente (R$ 228/ano)\",\n      savings: \"Economize R$ 240/ano\",\n      features: plans?.annual.features || [\n        \"Simulados ilimitados\",\n        \"Questões geradas por IA\",\n        \"Avaliação de redações por IA\",\n        \"Recomendações personalizadas\",\n        \"Estatísticas avançadas\",\n        \"Suporte prioritário\",\n      ],\n      popular: true,\n      isCurrent: currentPlan === \"annual\",\n    },\n  ];\n\n  return (\n    <div className=\"max-w-5xl mx-auto space-y-6\">\n      <div>\n        <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-subscription-title\">\n          Minha Assinatura\n        </h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Gerencie sua assinatura e escolha o plano ideal para você.\n        </p>\n      </div>\n\n      <Card data-testid=\"card-current-plan\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center\">\n                {currentPlan === \"free\" ? (\n                  <Zap className=\"h-6 w-6 text-primary\" />\n                ) : currentPlan === \"monthly\" ? (\n                  <Sparkles className=\"h-6 w-6 text-primary\" />\n                ) : (\n                  <Crown className=\"h-6 w-6 text-primary\" />\n                )}\n              </div>\n              <div>\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <h3 className=\"text-lg font-semibold capitalize\">\n                    {currentPlan === \"free\" ? \"Gratuito\" : currentPlan === \"monthly\" ? \"Mensal\" : \"Anual\"}\n                  </h3>\n                  <Badge variant=\"secondary\">Plano Atual</Badge>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  {currentPlan === \"free\"\n                    ? \"Você está usando o plano gratuito\"\n                    : \"Sua assinatura está ativa\"}\n                </p>\n              </div>\n            </div>\n            {currentPlan !== \"free\" && (\n              <Button\n                variant=\"outline\"\n                onClick={handleManageSubscription}\n                disabled={portalMutation.isPending}\n                data-testid=\"button-manage-subscription\"\n              >\n                {portalMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                ) : (\n                  <>\n                    Gerenciar Assinatura\n                    <ExternalLink className=\"h-4 w-4 ml-2\" />\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {plansLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        </div>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-3\">\n          {plansList.map((plan) => (\n            <Card\n              key={plan.id}\n              className={`relative ${plan.popular ? \"border-primary\" : \"\"}`}\n              data-testid={`card-plan-${plan.id}`}\n            >\n              {plan.popular && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2\">\n                  <Badge className=\"gap-1\">\n                    <Sparkles className=\"h-3 w-3\" />\n                    Melhor Valor\n                  </Badge>\n                </div>\n              )}\n              <CardHeader className=\"pb-4\">\n                <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                  {plan.id === \"free\" ? (\n                    <Zap className=\"h-5 w-5 text-muted-foreground\" />\n                  ) : plan.id === \"monthly\" ? (\n                    <Sparkles className=\"h-5 w-5 text-primary\" />\n                  ) : (\n                    <Crown className=\"h-5 w-5 text-chart-4\" />\n                  )}\n                  <CardTitle className=\"text-lg\">{plan.name}</CardTitle>\n                  {plan.isCurrent && (\n                    <Badge variant=\"secondary\">Atual</Badge>\n                  )}\n                </div>\n                <div className=\"flex items-baseline gap-1 flex-wrap\">\n                  <span className=\"text-4xl font-bold\">{plan.price}</span>\n                  {plan.period && <span className=\"text-muted-foreground\">{plan.period}</span>}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">{plan.description}</p>\n                {plan.savings && (\n                  <Badge variant=\"secondary\" className=\"mt-2 w-fit\">\n                    {plan.savings}\n                  </Badge>\n                )}\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <ul className=\"space-y-2\">\n                  {plan.features.map((feature, index) => (\n                    <li key={index} className=\"flex items-start gap-2 text-sm\">\n                      <CheckCircle2 className=\"h-4 w-4 text-chart-2 mt-0.5 flex-shrink-0\" />\n                      <span>{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {plan.id === \"free\" ? (\n                  <Button\n                    variant=\"secondary\"\n                    className=\"w-full\"\n                    disabled\n                    data-testid={`button-plan-${plan.id}`}\n                  >\n                    {plan.isCurrent ? \"Plano Atual\" : \"Gratuito\"}\n                  </Button>\n                ) : (\n                  <Button\n                    variant={plan.isCurrent ? \"secondary\" : plan.popular ? \"default\" : \"outline\"}\n                    className=\"w-full gap-2\"\n                    disabled={plan.isCurrent || checkoutMutation.isPending}\n                    onClick={() => handleSubscribe(plan.id as \"monthly\" | \"annual\")}\n                    data-testid={`button-plan-${plan.id}`}\n                  >\n                    {checkoutMutation.isPending ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : plan.isCurrent ? (\n                      \"Plano Atual\"\n                    ) : (\n                      <>\n                        Assinar {plan.name}\n                        <ArrowRight className=\"h-4 w-4\" />\n                      </>\n                    )}\n                  </Button>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card data-testid=\"card-payment-method\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base flex-wrap\">\n              <CreditCard className=\"h-5 w-5\" />\n              Pagamento\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {currentPlan === \"free\" ? (\n              <div className=\"text-center py-6\">\n                <CreditCard className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                <p className=\"text-muted-foreground mb-4\">\n                  Assine um plano para adicionar um método de pagamento\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-center py-6\">\n                <p className=\"text-muted-foreground mb-4\">\n                  Gerencie seu método de pagamento através do portal Stripe\n                </p>\n                <Button\n                  variant=\"outline\"\n                  onClick={handleManageSubscription}\n                  disabled={portalMutation.isPending}\n                  data-testid=\"button-manage-payment\"\n                >\n                  {portalMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <>\n                      Gerenciar Pagamento\n                      <ExternalLink className=\"h-4 w-4 ml-2\" />\n                    </>\n                  )}\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-billing-history\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Histórico de Cobrança</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {currentPlan === \"free\" ? (\n              <div className=\"text-center py-6\">\n                <p className=\"text-muted-foreground\">\n                  Nenhuma cobrança realizada\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-center py-6\">\n                <p className=\"text-muted-foreground mb-4\">\n                  Acesse o portal Stripe para ver seu histórico de cobranças\n                </p>\n                <Button\n                  variant=\"outline\"\n                  onClick={handleManageSubscription}\n                  disabled={portalMutation.isPending}\n                  data-testid=\"button-billing-history\"\n                >\n                  {portalMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <>\n                      Ver Histórico\n                      <ExternalLink className=\"h-4 w-4 ml-2\" />\n                    </>\n                  )}\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"border-primary/20 bg-primary/5\" data-testid=\"card-security-info\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n              <Shield className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold mb-1\">Pagamento Seguro</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Todos os pagamentos são processados de forma segura pelo Stripe.\n                Seus dados de cartão nunca são armazenados em nossos servidores.\n                Você pode cancelar sua assinatura a qualquer momento.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":14245,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"dark\" | \"light\" | \"system\";\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst initialState: ThemeProviderState = {\n  theme: \"system\",\n  setTheme: () => null,\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"system\",\n  storageKey = \"concurseia-theme\",\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(\n    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme\n  );\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n\n    if (theme === \"system\") {\n      const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\")\n        .matches\n        ? \"dark\"\n        : \"light\";\n      root.classList.add(systemTheme);\n      return;\n    }\n\n    root.classList.add(theme);\n  }, [theme]);\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      localStorage.setItem(storageKey, theme);\n      setTheme(theme);\n    },\n  };\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined)\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  return context;\n};\n","path":null,"size_bytes":1604,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/pages/exams.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  FileText,\n  Plus,\n  Search,\n  Clock,\n  Target,\n  CheckCircle2,\n  XCircle,\n  Play,\n  Eye,\n  Filter,\n  BookOpen,\n} from \"lucide-react\";\nimport type { Exam, ExamAttempt } from \"@shared/schema\";\n\ninterface ExamWithDetails extends Exam {\n  subjectNames?: string[];\n}\n\ninterface AttemptWithExam extends ExamAttempt {\n  exam?: Exam;\n}\n\nexport default function Exams() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [difficultyFilter, setDifficultyFilter] = useState(\"all\");\n  const [activeTab, setActiveTab] = useState(\"available\");\n\n  const { data: exams = [], isLoading: examsLoading } = useQuery<ExamWithDetails[]>({\n    queryKey: [\"/api/exams\"],\n  });\n\n  const { data: attempts = [], isLoading: attemptsLoading } = useQuery<AttemptWithExam[]>({\n    queryKey: [\"/api/attempts\"],\n  });\n\n  const getDifficultyBadge = (difficulty: string | null) => {\n    switch (difficulty) {\n      case \"easy\":\n        return <Badge variant=\"secondary\" className=\"bg-chart-2/10 text-chart-2 border-chart-2/20\">Facil</Badge>;\n      case \"medium\":\n        return <Badge variant=\"secondary\" className=\"bg-chart-4/10 text-chart-4 border-chart-4/20\">Medio</Badge>;\n      case \"hard\":\n        return <Badge variant=\"secondary\" className=\"bg-destructive/10 text-destructive border-destructive/20\">Dificil</Badge>;\n      default:\n        return <Badge variant=\"secondary\">Misto</Badge>;\n    }\n  };\n\n  const formatTime = (minutes: number | null) => {\n    if (!minutes) return \"-\";\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    if (hours > 0) {\n      return `${hours}h ${mins}min`;\n    }\n    return `${mins}min`;\n  };\n\n  const formatTimeSpent = (seconds: number | null) => {\n    if (!seconds) return \"-\";\n    const minutes = Math.floor(seconds / 60);\n    return formatTime(minutes);\n  };\n\n  const filteredExams = exams.filter((exam) => {\n    const matchesSearch = exam.title.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesDifficulty = difficultyFilter === \"all\" || exam.difficulty === difficultyFilter;\n    return matchesSearch && matchesDifficulty;\n  });\n\n  const completedAttempts = attempts.filter(a => a.status === \"completed\");\n\n  const getExamTitle = (attempt: AttemptWithExam) => {\n    if (attempt.exam?.title) return attempt.exam.title;\n    const exam = exams.find(e => e.id === attempt.examId);\n    return exam?.title || \"Simulado\";\n  };\n\n  if (examsLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n          <div>\n            <Skeleton className=\"h-8 w-48\" />\n            <Skeleton className=\"h-4 w-64 mt-2\" />\n          </div>\n          <Skeleton className=\"h-10 w-36\" />\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          {[1, 2, 3, 4].map((i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6\">\n                <Skeleton className=\"h-6 w-3/4 mb-2\" />\n                <Skeleton className=\"h-4 w-full mb-4\" />\n                <Skeleton className=\"h-10 w-full\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-exams-title\">Simulados</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Pratique com simulados personalizados e acompanhe seu progresso.\n          </p>\n        </div>\n        <Link href=\"/exams/new\">\n          <Button className=\"gap-2\" data-testid=\"button-create-exam\">\n            <Plus className=\"h-4 w-4\" />\n            Criar Simulado\n          </Button>\n        </Link>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList>\n          <TabsTrigger value=\"available\" data-testid=\"tab-available\">\n            Disponiveis ({exams.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"history\" data-testid=\"tab-history\">\n            Historico ({completedAttempts.length})\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"mt-6 flex flex-col sm:flex-row gap-4\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Buscar simulados...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-9\"\n              data-testid=\"input-search-exams\"\n            />\n          </div>\n          <Select value={difficultyFilter} onValueChange={setDifficultyFilter}>\n            <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"select-difficulty-filter\">\n              <Filter className=\"h-4 w-4 mr-2\" />\n              <SelectValue placeholder=\"Dificuldade\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Todas</SelectItem>\n              <SelectItem value=\"easy\">Facil</SelectItem>\n              <SelectItem value=\"medium\">Medio</SelectItem>\n              <SelectItem value=\"hard\">Dificil</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <TabsContent value=\"available\" className=\"mt-6\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            {filteredExams.map((exam) => (\n              <Card key={exam.id} className=\"hover-elevate\" data-testid={`card-exam-${exam.id}`}>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between gap-4 mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n                        <FileText className=\"h-5 w-5 text-primary\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold\">{exam.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{exam.description || \"Simulado personalizado\"}</p>\n                      </div>\n                    </div>\n                    {getDifficultyBadge(exam.difficulty)}\n                  </div>\n\n                  <div className=\"flex items-center gap-6 mb-4 text-sm text-muted-foreground\">\n                    <div className=\"flex items-center gap-1\">\n                      <BookOpen className=\"h-4 w-4\" />\n                      <span>{exam.questionCount} questoes</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>{formatTime(exam.timeLimit)}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2\">\n                    <Link href={`/exams/${exam.id}/start`} className=\"flex-1\">\n                      <Button className=\"w-full gap-2\" data-testid={`button-start-exam-${exam.id}`}>\n                        <Play className=\"h-4 w-4\" />\n                        Iniciar\n                      </Button>\n                    </Link>\n                    <Link href={`/exams/${exam.id}`}>\n                      <Button variant=\"outline\" size=\"icon\" data-testid={`button-view-exam-${exam.id}`}>\n                        <Eye className=\"h-4 w-4\" />\n                      </Button>\n                    </Link>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {filteredExams.length === 0 && (\n            <Card className=\"p-12\" data-testid=\"empty-state-exams\">\n              <div className=\"text-center\">\n                <FileText className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">Nenhum simulado encontrado</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  {exams.length === 0 \n                    ? \"Voce ainda nao criou nenhum simulado. Que tal comecar agora?\"\n                    : \"Nao encontramos simulados com os filtros selecionados.\"}\n                </p>\n                <Link href=\"/exams/new\">\n                  <Button className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Criar Novo Simulado\n                  </Button>\n                </Link>\n              </div>\n            </Card>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"history\" className=\"mt-6\">\n          <div className=\"space-y-4\">\n            {completedAttempts.map((attempt) => (\n              <Card key={attempt.id} className=\"hover-elevate\" data-testid={`card-attempt-${attempt.id}`}>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n                        {(attempt.score || 0) >= 70 ? (\n                          <CheckCircle2 className=\"h-5 w-5 text-chart-2\" />\n                        ) : (\n                          <XCircle className=\"h-5 w-5 text-destructive\" />\n                        )}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold\">{getExamTitle(attempt)}</h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {attempt.completedAt ? new Date(attempt.completedAt).toLocaleDateString(\"pt-BR\", {\n                            day: \"2-digit\",\n                            month: \"long\",\n                            year: \"numeric\",\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          }) : \"-\"}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-6\">\n                      <div className=\"text-center\">\n                        <div className=\"text-2xl font-bold\" style={{ color: (attempt.score || 0) >= 70 ? \"hsl(var(--chart-2))\" : \"hsl(var(--destructive))\" }}>\n                          {attempt.score ? `${Math.round(attempt.score)}%` : \"-\"}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">Nota</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-semibold text-chart-2\">{attempt.correctCount || 0}</div>\n                        <div className=\"text-xs text-muted-foreground\">Acertos</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-semibold text-destructive\">{attempt.incorrectCount || 0}</div>\n                        <div className=\"text-xs text-muted-foreground\">Erros</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-semibold\">{formatTimeSpent(attempt.timeSpent)}</div>\n                        <div className=\"text-xs text-muted-foreground\">Tempo</div>\n                      </div>\n                    </div>\n\n                    <Link href={`/exams/${attempt.examId}/review/${attempt.id}`}>\n                      <Button variant=\"outline\" className=\"gap-2\" data-testid={`button-review-${attempt.id}`}>\n                        <Eye className=\"h-4 w-4\" />\n                        Revisar\n                      </Button>\n                    </Link>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {completedAttempts.length === 0 && (\n            <Card className=\"p-12\" data-testid=\"empty-state-history\">\n              <div className=\"text-center\">\n                <Target className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">Nenhum simulado realizado</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Voce ainda nao completou nenhum simulado. Que tal comecar agora?\n                </p>\n                <Button variant=\"outline\" onClick={() => setActiveTab(\"available\")} className=\"gap-2\">\n                  <Play className=\"h-4 w-4\" />\n                  Ver Simulados Disponiveis\n                </Button>\n              </div>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":13221,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/pages/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\nimport {\n  FileText,\n  Target,\n  Clock,\n  TrendingUp,\n  ArrowRight,\n  Sparkles,\n  BookOpen,\n  CheckCircle2,\n  XCircle,\n  AlertCircle,\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { Exam, ExamAttempt, UserPerformance, AiRecommendation } from \"@shared/schema\";\n\ninterface UserStats {\n  totalExams: number;\n  totalAttempts: number;\n  averageScore: number;\n  totalTimeSpent: number;\n}\n\nexport default function Dashboard() {\n  const { user } = useAuth();\n\n  const { data: exams, isLoading: examsLoading } = useQuery<Exam[]>({\n    queryKey: [\"/api/exams\"],\n  });\n\n  const { data: attempts, isLoading: attemptsLoading } = useQuery<ExamAttempt[]>({\n    queryKey: [\"/api/attempts\"],\n  });\n\n  const { data: performance, isLoading: performanceLoading } = useQuery<UserPerformance[]>({\n    queryKey: [\"/api/performance\"],\n  });\n\n  const { data: stats, isLoading: statsLoading } = useQuery<UserStats>({\n    queryKey: [\"/api/stats\"],\n  });\n\n  const { data: recommendations, isLoading: recsLoading } = useQuery<AiRecommendation[]>({\n    queryKey: [\"/api/recommendations\"],\n  });\n\n  const completedAttempts = attempts?.filter(a => a.status === \"completed\") || [];\n  const recentExamsWithAttempts = completedAttempts\n    .sort((a, b) => new Date(b.completedAt || b.startedAt || Date.now()).getTime() - new Date(a.completedAt || a.startedAt || Date.now()).getTime())\n    .slice(0, 4)\n    .map(attempt => {\n      const exam = exams?.find(e => e.id === attempt.examId);\n      return {\n        id: attempt.id,\n        title: exam?.title || \"Simulado\",\n        date: attempt.completedAt || attempt.startedAt,\n        score: Math.round(attempt.score || 0),\n        status: attempt.status,\n      };\n    });\n\n  const performanceChartData = completedAttempts\n    .sort((a, b) => new Date(a.completedAt || a.startedAt || Date.now()).getTime() - new Date(b.completedAt || b.startedAt || Date.now()).getTime())\n    .slice(-6)\n    .map((attempt, index) => ({\n      attempt: `#${index + 1}`,\n      acertos: Math.round(attempt.score || 0),\n    }));\n\n  const subjectPerformance = performance?.map((p, index) => ({\n    name: p.subjectId ? `Area ${index + 1}` : \"Geral\",\n    value: Math.round(p.averageScore || 0),\n  })) || [];\n\n  const unreadRecommendations = recommendations?.filter(r => !r.isRead).slice(0, 3) || [];\n\n  const totalExams = stats?.totalExams || exams?.length || 0;\n  const avgScore = stats?.averageScore || \n    (completedAttempts.length > 0 \n      ? Math.round(completedAttempts.reduce((acc, a) => acc + (a.score || 0), 0) / completedAttempts.length)\n      : 0);\n  const totalTimeHours = stats?.totalTimeSpent \n    ? Math.round(stats.totalTimeSpent / 60) \n    : Math.round((completedAttempts.reduce((acc, a) => acc + (a.timeSpent || 0), 0)) / 60);\n\n  const statsCards = [\n    { title: \"Simulados Criados\", value: totalExams.toString(), icon: FileText, change: \"Total\" },\n    { title: \"Taxa de Acertos\", value: `${avgScore}%`, icon: Target, change: \"Media geral\" },\n    { title: \"Tempo de Estudo\", value: `${totalTimeHours}h`, icon: Clock, change: \"Total\" },\n    { title: \"Tentativas\", value: completedAttempts.length.toString(), icon: TrendingUp, change: \"Simulados realizados\" },\n  ];\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\": return \"destructive\";\n      case \"medium\": return \"secondary\";\n      default: return \"outline\";\n    }\n  };\n\n  const getPriorityIcon = (priority: string) => {\n    switch (priority) {\n      case \"high\": return <AlertCircle className=\"h-4 w-4\" />;\n      case \"medium\": return <Clock className=\"h-4 w-4\" />;\n      default: return <CheckCircle2 className=\"h-4 w-4\" />;\n    }\n  };\n\n  const isLoading = examsLoading || attemptsLoading || performanceLoading || statsLoading;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-dashboard-title\">\n            Ola, {user?.firstName || \"Estudante\"}!\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Continue sua jornada de estudos. Voce esta no caminho certo!\n          </p>\n        </div>\n        <Link href=\"/exams/new\">\n          <Button className=\"gap-2\" data-testid=\"button-new-exam\">\n            <FileText className=\"h-4 w-4\" />\n            Novo Simulado\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {statsCards.map((stat, index) => (\n          <Card key={index} data-testid={`card-stat-${index}`}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between gap-2 mb-4\">\n                <span className=\"text-sm font-medium text-muted-foreground\">{stat.title}</span>\n                <div className=\"h-9 w-9 rounded-lg bg-primary/10 flex items-center justify-center\">\n                  <stat.icon className=\"h-4 w-4 text-primary\" />\n                </div>\n              </div>\n              {isLoading ? (\n                <Skeleton className=\"h-8 w-20\" />\n              ) : (\n                <div className=\"text-3xl font-bold\" data-testid={`stat-${index}-value`}>{stat.value}</div>\n              )}\n              <p className=\"text-xs text-muted-foreground mt-1\">{stat.change}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        <Card data-testid=\"card-performance-chart\">\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Desempenho nas Ultimas Tentativas</CardTitle>\n            <Badge variant=\"secondary\" className=\"text-xs\">Historico</Badge>\n          </CardHeader>\n          <CardContent className=\"pt-4\">\n            <div className=\"h-[280px]\">\n              {attemptsLoading ? (\n                <div className=\"flex items-center justify-center h-full\">\n                  <Skeleton className=\"h-full w-full\" />\n                </div>\n              ) : performanceChartData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={performanceChartData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                    <XAxis dataKey=\"attempt\" className=\"text-xs\" />\n                    <YAxis className=\"text-xs\" domain={[0, 100]} />\n                    <Tooltip\n                      contentStyle={{\n                        backgroundColor: \"hsl(var(--popover))\",\n                        border: \"1px solid hsl(var(--border))\",\n                        borderRadius: \"var(--radius)\",\n                      }}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"acertos\"\n                      stroke=\"hsl(var(--chart-2))\"\n                      strokeWidth={2}\n                      dot={{ fill: \"hsl(var(--chart-2))\" }}\n                      name=\"% Acertos\"\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground\">\n                  <Target className=\"h-12 w-12 mb-4\" />\n                  <p className=\"text-sm\">Nenhum simulado realizado ainda</p>\n                  <Link href=\"/exams/new\">\n                    <Button variant=\"outline\" size=\"sm\" className=\"mt-4\">\n                      Criar primeiro simulado\n                    </Button>\n                  </Link>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-subject-breakdown\">\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Desempenho por Area</CardTitle>\n            <Link href=\"/stats\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-1\">\n                Ver detalhes\n                <ArrowRight className=\"h-3 w-3\" />\n              </Button>\n            </Link>\n          </CardHeader>\n          <CardContent className=\"pt-4\">\n            {performanceLoading ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3].map((i) => (\n                  <div key={i} className=\"space-y-2\">\n                    <Skeleton className=\"h-4 w-full\" />\n                    <Skeleton className=\"h-2 w-full\" />\n                  </div>\n                ))}\n              </div>\n            ) : subjectPerformance.length > 0 ? (\n              <div className=\"space-y-4\">\n                {subjectPerformance.map((subject, index) => (\n                  <div key={index} className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm font-medium\">{subject.name}</span>\n                      <span className=\"text-sm text-muted-foreground\">{subject.value}%</span>\n                    </div>\n                    <Progress value={subject.value} className=\"h-2\" />\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center justify-center py-8 text-muted-foreground\">\n                <BookOpen className=\"h-10 w-10 mb-3\" />\n                <p className=\"text-sm\">Complete simulados para ver seu desempenho</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        <Card className=\"lg:col-span-2\" data-testid=\"card-recent-exams\">\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Simulados Recentes</CardTitle>\n            <Link href=\"/exams\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-1\">\n                Ver todos\n                <ArrowRight className=\"h-3 w-3\" />\n              </Button>\n            </Link>\n          </CardHeader>\n          <CardContent className=\"pt-4\">\n            {attemptsLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <Skeleton key={i} className=\"h-16 w-full\" />\n                ))}\n              </div>\n            ) : recentExamsWithAttempts.length > 0 ? (\n              <div className=\"space-y-3\">\n                {recentExamsWithAttempts.map((exam) => (\n                  <div\n                    key={exam.id}\n                    className=\"flex items-center justify-between p-3 rounded-lg border hover-elevate cursor-pointer\"\n                    data-testid={`exam-item-${exam.id}`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n                        <FileText className=\"h-5 w-5 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium\">{exam.title}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {exam.date ? new Date(exam.date).toLocaleDateString(\"pt-BR\") : \"\"}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant={exam.score >= 70 ? \"default\" : \"secondary\"}>\n                        {exam.score}%\n                      </Badge>\n                      {exam.score >= 70 ? (\n                        <CheckCircle2 className=\"h-5 w-5 text-chart-2\" />\n                      ) : (\n                        <XCircle className=\"h-5 w-5 text-destructive\" />\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center justify-center py-8 text-muted-foreground\">\n                <FileText className=\"h-10 w-10 mb-3\" />\n                <p className=\"text-sm\">Nenhum simulado realizado ainda</p>\n                <Link href=\"/exams/new\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"mt-4\">\n                    Criar simulado\n                  </Button>\n                </Link>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-ai-recommendations\">\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n              <Sparkles className=\"h-4 w-4 text-primary\" />\n              Sugestoes da IA\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"pt-4\">\n            {recsLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <Skeleton key={i} className=\"h-20 w-full\" />\n                ))}\n              </div>\n            ) : unreadRecommendations.length > 0 ? (\n              <div className=\"space-y-3\">\n                {unreadRecommendations.map((rec) => (\n                  <div\n                    key={rec.id}\n                    className=\"p-3 rounded-lg border space-y-2\"\n                    data-testid={`recommendation-${rec.id}`}\n                  >\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <span className=\"font-medium text-sm\">{rec.title}</span>\n                      <Badge variant={getPriorityColor(String(rec.priority || \"low\")) as any} className=\"text-xs\">\n                        {getPriorityIcon(String(rec.priority || \"low\"))}\n                      </Badge>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">{rec.description}</p>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center justify-center py-8 text-muted-foreground\">\n                <Sparkles className=\"h-10 w-10 mb-3\" />\n                <p className=\"text-sm text-center\">Complete simulados para receber sugestoes personalizadas</p>\n              </div>\n            )}\n            <Link href=\"/recommendations\">\n              <Button variant=\"outline\" className=\"w-full mt-4 gap-2\">\n                Ver todas as sugestoes\n                <ArrowRight className=\"h-4 w-4\" />\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card data-testid=\"card-quick-actions\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-base font-semibold\">Acoes Rapidas</CardTitle>\n        </CardHeader>\n        <CardContent className=\"pt-4\">\n          <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <Link href=\"/exams/new\">\n              <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\n                <FileText className=\"h-5 w-5\" />\n                <span>Novo Simulado</span>\n              </Button>\n            </Link>\n            <Link href=\"/materials\">\n              <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\n                <BookOpen className=\"h-5 w-5\" />\n                <span>Materiais</span>\n              </Button>\n            </Link>\n            <Link href=\"/stats\">\n              <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\n                <Target className=\"h-5 w-5\" />\n                <span>Ver Estatisticas</span>\n              </Button>\n            </Link>\n            <Link href=\"/recommendations\">\n              <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\n                <Sparkles className=\"h-5 w-5\" />\n                <span>Sugestoes IA</span>\n              </Button>\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":16582,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useTheme } from \"@/components/theme-provider\";\n\nexport function ThemeToggle() {\n  const { setTheme } = useTheme();\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-theme-toggle\">\n          <Sun className=\"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n          <Moon className=\"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n          <span className=\"sr-only\">Alternar tema</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem onClick={() => setTheme(\"light\")} data-testid=\"menu-item-light\">\n          Claro\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"dark\")} data-testid=\"menu-item-dark\">\n          Escuro\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"system\")} data-testid=\"menu-item-system\">\n          Sistema\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":1311,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"server/storage.ts":{"content":"import {\n  users,\n  subjects,\n  questions,\n  materials,\n  exams,\n  examQuestions,\n  examAttempts,\n  questionAnswers,\n  userPerformance,\n  aiRecommendations,\n  type User,\n  type UpsertUser,\n  type Subject,\n  type InsertSubject,\n  type Question,\n  type InsertQuestion,\n  type Material,\n  type InsertMaterial,\n  type Exam,\n  type InsertExam,\n  type ExamQuestion,\n  type InsertExamQuestion,\n  type ExamAttempt,\n  type InsertExamAttempt,\n  type QuestionAnswer,\n  type InsertQuestionAnswer,\n  type UserPerformance,\n  type InsertUserPerformance,\n  type AiRecommendation,\n  type InsertAiRecommendation,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and, desc, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUser(id: string, data: Partial<User>): Promise<User | undefined>;\n\n  getSubjects(): Promise<Subject[]>;\n  getSubject(id: string): Promise<Subject | undefined>;\n  createSubject(data: InsertSubject): Promise<Subject>;\n\n  getQuestions(subjectId?: string): Promise<Question[]>;\n  getQuestion(id: string): Promise<Question | undefined>;\n  createQuestion(data: InsertQuestion): Promise<Question>;\n  createQuestions(data: InsertQuestion[]): Promise<Question[]>;\n\n  getMaterials(userId: string): Promise<Material[]>;\n  getMaterial(id: string): Promise<Material | undefined>;\n  createMaterial(data: InsertMaterial): Promise<Material>;\n  updateMaterial(id: string, data: Partial<Material>): Promise<Material | undefined>;\n  deleteMaterial(id: string): Promise<void>;\n\n  getExams(userId: string): Promise<Exam[]>;\n  getExam(id: string): Promise<Exam | undefined>;\n  createExam(data: InsertExam): Promise<Exam>;\n  updateExam(id: string, data: Partial<Exam>): Promise<Exam | undefined>;\n  deleteExam(id: string): Promise<void>;\n\n  getExamQuestions(examId: string): Promise<(ExamQuestion & { question: Question })[]>;\n  createExamQuestions(data: InsertExamQuestion[]): Promise<ExamQuestion[]>;\n\n  getExamAttempts(userId: string): Promise<ExamAttempt[]>;\n  getExamAttempt(id: string): Promise<ExamAttempt | undefined>;\n  createExamAttempt(data: InsertExamAttempt): Promise<ExamAttempt>;\n  updateExamAttempt(id: string, data: Partial<ExamAttempt>): Promise<ExamAttempt | undefined>;\n\n  getQuestionAnswers(attemptId: string): Promise<QuestionAnswer[]>;\n  createQuestionAnswer(data: InsertQuestionAnswer): Promise<QuestionAnswer>;\n  updateQuestionAnswer(id: string, data: Partial<QuestionAnswer>): Promise<QuestionAnswer | undefined>;\n\n  getUserPerformance(userId: string): Promise<UserPerformance[]>;\n  upsertUserPerformance(data: InsertUserPerformance): Promise<UserPerformance>;\n\n  getRecommendations(userId: string): Promise<AiRecommendation[]>;\n  createRecommendation(data: InsertAiRecommendation): Promise<AiRecommendation>;\n  markRecommendationRead(id: string): Promise<void>;\n\n  getUserStats(userId: string): Promise<{\n    totalExams: number;\n    completedExams: number;\n    averageScore: number;\n    totalQuestions: number;\n    correctAnswers: number;\n  }>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUser(id: string, data: Partial<User>): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  async getSubjects(): Promise<Subject[]> {\n    return await db.select().from(subjects).orderBy(subjects.name);\n  }\n\n  async getSubject(id: string): Promise<Subject | undefined> {\n    const [subject] = await db.select().from(subjects).where(eq(subjects.id, id));\n    return subject;\n  }\n\n  async createSubject(data: InsertSubject): Promise<Subject> {\n    const [subject] = await db.insert(subjects).values(data).returning();\n    return subject;\n  }\n\n  async getQuestions(subjectId?: string): Promise<Question[]> {\n    if (subjectId) {\n      return await db.select().from(questions).where(eq(questions.subjectId, subjectId));\n    }\n    return await db.select().from(questions);\n  }\n\n  async getQuestion(id: string): Promise<Question | undefined> {\n    const [question] = await db.select().from(questions).where(eq(questions.id, id));\n    return question;\n  }\n\n  async createQuestion(data: InsertQuestion): Promise<Question> {\n    const [question] = await db.insert(questions).values(data).returning();\n    return question;\n  }\n\n  async createQuestions(data: InsertQuestion[]): Promise<Question[]> {\n    if (data.length === 0) return [];\n    return await db.insert(questions).values(data).returning();\n  }\n\n  async getMaterials(userId: string): Promise<Material[]> {\n    return await db\n      .select()\n      .from(materials)\n      .where(eq(materials.userId, userId))\n      .orderBy(desc(materials.createdAt));\n  }\n\n  async getMaterial(id: string): Promise<Material | undefined> {\n    const [material] = await db.select().from(materials).where(eq(materials.id, id));\n    return material;\n  }\n\n  async createMaterial(data: InsertMaterial): Promise<Material> {\n    const [material] = await db.insert(materials).values(data).returning();\n    return material;\n  }\n\n  async updateMaterial(id: string, data: Partial<Material>): Promise<Material | undefined> {\n    const [material] = await db\n      .update(materials)\n      .set(data)\n      .where(eq(materials.id, id))\n      .returning();\n    return material;\n  }\n\n  async deleteMaterial(id: string): Promise<void> {\n    await db.delete(materials).where(eq(materials.id, id));\n  }\n\n  async getExams(userId: string): Promise<Exam[]> {\n    return await db\n      .select()\n      .from(exams)\n      .where(eq(exams.userId, userId))\n      .orderBy(desc(exams.createdAt));\n  }\n\n  async getExam(id: string): Promise<Exam | undefined> {\n    const [exam] = await db.select().from(exams).where(eq(exams.id, id));\n    return exam;\n  }\n\n  async createExam(data: InsertExam): Promise<Exam> {\n    const [exam] = await db.insert(exams).values(data).returning();\n    return exam;\n  }\n\n  async updateExam(id: string, data: Partial<Exam>): Promise<Exam | undefined> {\n    const [exam] = await db\n      .update(exams)\n      .set(data)\n      .where(eq(exams.id, id))\n      .returning();\n    return exam;\n  }\n\n  async deleteExam(id: string): Promise<void> {\n    await db.delete(examQuestions).where(eq(examQuestions.examId, id));\n    await db.delete(exams).where(eq(exams.id, id));\n  }\n\n  async getExamQuestions(examId: string): Promise<(ExamQuestion & { question: Question })[]> {\n    const result = await db\n      .select({\n        id: examQuestions.id,\n        examId: examQuestions.examId,\n        questionId: examQuestions.questionId,\n        orderIndex: examQuestions.orderIndex,\n        question: questions,\n      })\n      .from(examQuestions)\n      .innerJoin(questions, eq(examQuestions.questionId, questions.id))\n      .where(eq(examQuestions.examId, examId))\n      .orderBy(examQuestions.orderIndex);\n\n    return result.map(r => ({\n      id: r.id,\n      examId: r.examId,\n      questionId: r.questionId,\n      orderIndex: r.orderIndex,\n      question: r.question,\n    }));\n  }\n\n  async createExamQuestions(data: InsertExamQuestion[]): Promise<ExamQuestion[]> {\n    if (data.length === 0) return [];\n    return await db.insert(examQuestions).values(data).returning();\n  }\n\n  async getExamAttempts(userId: string): Promise<ExamAttempt[]> {\n    return await db\n      .select()\n      .from(examAttempts)\n      .where(eq(examAttempts.userId, userId))\n      .orderBy(desc(examAttempts.startedAt));\n  }\n\n  async getExamAttempt(id: string): Promise<ExamAttempt | undefined> {\n    const [attempt] = await db.select().from(examAttempts).where(eq(examAttempts.id, id));\n    return attempt;\n  }\n\n  async createExamAttempt(data: InsertExamAttempt): Promise<ExamAttempt> {\n    const [attempt] = await db.insert(examAttempts).values(data).returning();\n    return attempt;\n  }\n\n  async updateExamAttempt(id: string, data: Partial<ExamAttempt>): Promise<ExamAttempt | undefined> {\n    const [attempt] = await db\n      .update(examAttempts)\n      .set(data)\n      .where(eq(examAttempts.id, id))\n      .returning();\n    return attempt;\n  }\n\n  async getQuestionAnswers(attemptId: string): Promise<QuestionAnswer[]> {\n    return await db\n      .select()\n      .from(questionAnswers)\n      .where(eq(questionAnswers.attemptId, attemptId));\n  }\n\n  async createQuestionAnswer(data: InsertQuestionAnswer): Promise<QuestionAnswer> {\n    const [answer] = await db.insert(questionAnswers).values(data).returning();\n    return answer;\n  }\n\n  async updateQuestionAnswer(id: string, data: Partial<QuestionAnswer>): Promise<QuestionAnswer | undefined> {\n    const [answer] = await db\n      .update(questionAnswers)\n      .set(data)\n      .where(eq(questionAnswers.id, id))\n      .returning();\n    return answer;\n  }\n\n  async getUserPerformance(userId: string): Promise<UserPerformance[]> {\n    return await db\n      .select()\n      .from(userPerformance)\n      .where(eq(userPerformance.userId, userId));\n  }\n\n  async upsertUserPerformance(data: InsertUserPerformance): Promise<UserPerformance> {\n    const existing = await db\n      .select()\n      .from(userPerformance)\n      .where(\n        and(\n          eq(userPerformance.userId, data.userId),\n          eq(userPerformance.subjectId, data.subjectId)\n        )\n      );\n\n    if (existing.length > 0) {\n      const [updated] = await db\n        .update(userPerformance)\n        .set({ ...data, updatedAt: new Date() })\n        .where(eq(userPerformance.id, existing[0].id))\n        .returning();\n      return updated;\n    }\n\n    const [created] = await db.insert(userPerformance).values(data).returning();\n    return created;\n  }\n\n  async getRecommendations(userId: string): Promise<AiRecommendation[]> {\n    return await db\n      .select()\n      .from(aiRecommendations)\n      .where(eq(aiRecommendations.userId, userId))\n      .orderBy(aiRecommendations.priority, desc(aiRecommendations.createdAt));\n  }\n\n  async createRecommendation(data: InsertAiRecommendation): Promise<AiRecommendation> {\n    const [recommendation] = await db.insert(aiRecommendations).values(data).returning();\n    return recommendation;\n  }\n\n  async markRecommendationRead(id: string): Promise<void> {\n    await db\n      .update(aiRecommendations)\n      .set({ isRead: true })\n      .where(eq(aiRecommendations.id, id));\n  }\n\n  async getUserStats(userId: string): Promise<{\n    totalExams: number;\n    completedExams: number;\n    averageScore: number;\n    totalQuestions: number;\n    correctAnswers: number;\n  }> {\n    const attempts = await db\n      .select()\n      .from(examAttempts)\n      .where(eq(examAttempts.userId, userId));\n\n    const completedAttempts = attempts.filter(a => a.status === \"completed\");\n    const totalScore = completedAttempts.reduce((sum, a) => sum + (a.score || 0), 0);\n    const totalCorrect = completedAttempts.reduce((sum, a) => sum + (a.correctCount || 0), 0);\n    const totalIncorrect = completedAttempts.reduce((sum, a) => sum + (a.incorrectCount || 0), 0);\n\n    return {\n      totalExams: attempts.length,\n      completedExams: completedAttempts.length,\n      averageScore: completedAttempts.length > 0 ? totalScore / completedAttempts.length : 0,\n      totalQuestions: totalCorrect + totalIncorrect,\n      correctAnswers: totalCorrect,\n    };\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":11818,"size_tokens":null},"client/src/pages/profile.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Camera, Save, User } from \"lucide-react\";\n\nconst profileSchema = z.object({\n  firstName: z.string().min(2, \"Nome deve ter pelo menos 2 caracteres\"),\n  lastName: z.string().min(2, \"Sobrenome deve ter pelo menos 2 caracteres\"),\n  studyArea: z.string().optional(),\n  targetExam: z.string().optional(),\n  studyGoal: z.string().optional(),\n});\n\ntype ProfileFormData = z.infer<typeof profileSchema>;\n\nconst studyAreas = [\n  { value: \"fiscal\", label: \"Área Fiscal\" },\n  { value: \"tribunais\", label: \"Tribunais\" },\n  { value: \"policial\", label: \"Área Policial\" },\n  { value: \"bancaria\", label: \"Área Bancária\" },\n  { value: \"administrativa\", label: \"Área Administrativa\" },\n  { value: \"juridica\", label: \"Área Jurídica\" },\n  { value: \"ti\", label: \"Tecnologia da Informação\" },\n  { value: \"saude\", label: \"Área da Saúde\" },\n  { value: \"educacao\", label: \"Educação\" },\n  { value: \"outro\", label: \"Outro\" },\n];\n\nexport default function Profile() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const form = useForm<ProfileFormData>({\n    resolver: zodResolver(profileSchema),\n    defaultValues: {\n      firstName: user?.firstName || \"\",\n      lastName: user?.lastName || \"\",\n      studyArea: user?.studyArea || \"\",\n      targetExam: user?.targetExam || \"\",\n      studyGoal: user?.studyGoal || \"\",\n    },\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: ProfileFormData) => {\n      return apiRequest(\"PATCH\", \"/api/users/profile\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Perfil atualizado!\",\n        description: \"Suas informações foram salvas com sucesso.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro ao salvar\",\n        description: \"Não foi possível atualizar seu perfil. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ProfileFormData) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  const getInitials = () => {\n    if (!user) return \"U\";\n    const first = user.firstName?.charAt(0) || \"\";\n    const last = user.lastName?.charAt(0) || \"\";\n    return (first + last).toUpperCase() || user.email?.charAt(0)?.toUpperCase() || \"U\";\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      <div>\n        <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-profile-title\">Meu Perfil</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Gerencie suas informações pessoais e preferências de estudo.\n        </p>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-3\">\n        <Card className=\"md:col-span-1\" data-testid=\"card-profile-photo\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Foto do Perfil</CardTitle>\n          </CardHeader>\n          <CardContent className=\"flex flex-col items-center\">\n            <div className=\"relative\">\n              <Avatar className=\"h-32 w-32\">\n                <AvatarImage src={user?.profileImageUrl || undefined} alt=\"Foto do perfil\" />\n                <AvatarFallback className=\"text-3xl\">{getInitials()}</AvatarFallback>\n              </Avatar>\n              <Button\n                size=\"icon\"\n                variant=\"secondary\"\n                className=\"absolute bottom-0 right-0 rounded-full\"\n                data-testid=\"button-change-photo\"\n              >\n                <Camera className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-4 text-center\">\n              Sua foto é obtida automaticamente da sua conta de login.\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"md:col-span-2\" data-testid=\"card-profile-info\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Informações Pessoais</CardTitle>\n            <CardDescription>\n              Atualize suas informações de perfil e preferências de estudo.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                <div className=\"grid gap-4 sm:grid-cols-2\">\n                  <FormField\n                    control={form.control}\n                    name=\"firstName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Seu nome\" {...field} data-testid=\"input-first-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"lastName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Sobrenome</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Seu sobrenome\" {...field} data-testid=\"input-last-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"p-4 rounded-lg border bg-muted/50\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <User className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-sm font-medium\">Email</span>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\" data-testid=\"text-user-email\">\n                    {user?.email || \"Não informado\"}\n                  </p>\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"studyArea\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Área de Estudo</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-study-area\">\n                            <SelectValue placeholder=\"Selecione sua área de interesse\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {studyAreas.map((area) => (\n                            <SelectItem key={area.value} value={area.value}>\n                              {area.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormDescription>\n                        Isso nos ajuda a personalizar suas recomendações de estudo.\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"targetExam\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Concurso Alvo</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder=\"Ex: TRF 5ª Região, INSS, Polícia Federal\"\n                          {...field}\n                          data-testid=\"input-target-exam\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        Qual concurso você está se preparando?\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"studyGoal\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Meta de Estudos</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          placeholder=\"Descreva sua meta de estudos e objetivos...\"\n                          className=\"resize-none\"\n                          {...field}\n                          data-testid=\"textarea-study-goal\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        Compartilhe seus objetivos para personalizarmos sua experiência.\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"flex justify-end\">\n                  <Button\n                    type=\"submit\"\n                    className=\"gap-2\"\n                    disabled={updateProfileMutation.isPending}\n                    data-testid=\"button-save-profile\"\n                  >\n                    <Save className=\"h-4 w-4\" />\n                    {updateProfileMutation.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card data-testid=\"card-account-stats\">\n        <CardHeader>\n          <CardTitle className=\"text-base\">Estatísticas da Conta</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 sm:grid-cols-3\">\n            <div className=\"p-4 rounded-lg border text-center\">\n              <div className=\"text-2xl font-bold text-primary\">24</div>\n              <div className=\"text-sm text-muted-foreground\">Simulados Realizados</div>\n            </div>\n            <div className=\"p-4 rounded-lg border text-center\">\n              <div className=\"text-2xl font-bold text-chart-2\">78%</div>\n              <div className=\"text-sm text-muted-foreground\">Taxa de Acertos</div>\n            </div>\n            <div className=\"p-4 rounded-lg border text-center\">\n              <div className=\"text-2xl font-bold text-chart-3\">42h</div>\n              <div className=\"text-sm text-muted-foreground\">Tempo de Estudo</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":11388,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport {\n  insertSubjectSchema,\n  insertMaterialSchema,\n  insertExamSchema,\n  insertExamAttemptSchema,\n  insertQuestionAnswerSchema,\n} from \"@shared/schema\";\nimport {\n  generateQuestionsFromContent,\n  evaluateEssayAnswer,\n  generateStudyRecommendations,\n  summarizeMaterial,\n  explainQuestion,\n} from \"./gemini\";\nimport {\n  stripe,\n  ensureStripeProductsExist,\n  getMonthlyPriceId,\n  getAnnualPriceId,\n  SUBSCRIPTION_PLANS,\n} from \"./stripe\";\n\nexport async function registerRoutes(httpServer: Server, app: Express): Promise<Server> {\n  await setupAuth(app);\n  \n  // Initialize Stripe products and prices\n  try {\n    await ensureStripeProductsExist();\n  } catch (error) {\n    console.error(\"Failed to initialize Stripe products:\", error);\n  }\n\n  app.get(\"/api/auth/user\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  app.patch(\"/api/auth/user\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { studyArea, targetExam, studyGoal } = req.body;\n      const user = await storage.updateUser(userId, { studyArea, targetExam, studyGoal });\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      res.status(500).json({ message: \"Failed to update user\" });\n    }\n  });\n\n  app.get(\"/api/subjects\", async (_req, res) => {\n    try {\n      const subjects = await storage.getSubjects();\n      res.json(subjects);\n    } catch (error) {\n      console.error(\"Error fetching subjects:\", error);\n      res.status(500).json({ message: \"Failed to fetch subjects\" });\n    }\n  });\n\n  app.post(\"/api/subjects\", isAuthenticated, async (req, res) => {\n    try {\n      const data = insertSubjectSchema.parse(req.body);\n      const subject = await storage.createSubject(data);\n      res.json(subject);\n    } catch (error) {\n      console.error(\"Error creating subject:\", error);\n      res.status(500).json({ message: \"Failed to create subject\" });\n    }\n  });\n\n  app.get(\"/api/questions\", isAuthenticated, async (req, res) => {\n    try {\n      const subjectId = req.query.subjectId as string | undefined;\n      const questions = await storage.getQuestions(subjectId);\n      res.json(questions);\n    } catch (error) {\n      console.error(\"Error fetching questions:\", error);\n      res.status(500).json({ message: \"Failed to fetch questions\" });\n    }\n  });\n\n  app.get(\"/api/questions/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const question = await storage.getQuestion(req.params.id);\n      if (!question) {\n        return res.status(404).json({ message: \"Question not found\" });\n      }\n      res.json(question);\n    } catch (error) {\n      console.error(\"Error fetching question:\", error);\n      res.status(500).json({ message: \"Failed to fetch question\" });\n    }\n  });\n\n  app.post(\"/api/questions/:id/explain\", isAuthenticated, async (req, res) => {\n    try {\n      const question = await storage.getQuestion(req.params.id);\n      if (!question) {\n        return res.status(404).json({ message: \"Question not found\" });\n      }\n      const explanation = await explainQuestion(\n        question.content,\n        question.options as { letter: string; text: string }[] | null,\n        question.correctAnswer\n      );\n      res.json({ explanation });\n    } catch (error) {\n      console.error(\"Error explaining question:\", error);\n      res.status(500).json({ message: \"Failed to explain question\" });\n    }\n  });\n\n  app.get(\"/api/materials\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const materials = await storage.getMaterials(userId);\n      res.json(materials);\n    } catch (error) {\n      console.error(\"Error fetching materials:\", error);\n      res.status(500).json({ message: \"Failed to fetch materials\" });\n    }\n  });\n\n  app.get(\"/api/materials/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const material = await storage.getMaterial(req.params.id);\n      if (!material) {\n        return res.status(404).json({ message: \"Material not found\" });\n      }\n      if (material.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      res.json(material);\n    } catch (error) {\n      console.error(\"Error fetching material:\", error);\n      res.status(500).json({ message: \"Failed to fetch material\" });\n    }\n  });\n\n  app.post(\"/api/materials\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const data = insertMaterialSchema.parse({ ...req.body, userId });\n      const material = await storage.createMaterial(data);\n\n      if (material.content) {\n        const summary = await summarizeMaterial(material.content, material.title);\n        await storage.updateMaterial(material.id, { summary });\n        material.summary = summary;\n      }\n\n      res.json(material);\n    } catch (error) {\n      console.error(\"Error creating material:\", error);\n      res.status(500).json({ message: \"Failed to create material\" });\n    }\n  });\n\n  app.delete(\"/api/materials/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const material = await storage.getMaterial(req.params.id);\n      if (!material) {\n        return res.status(404).json({ message: \"Material not found\" });\n      }\n      if (material.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      await storage.deleteMaterial(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting material:\", error);\n      res.status(500).json({ message: \"Failed to delete material\" });\n    }\n  });\n\n  app.post(\"/api/materials/:id/generate-questions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const material = await storage.getMaterial(req.params.id);\n      if (!material || !material.content) {\n        return res.status(404).json({ message: \"Material not found or has no content\" });\n      }\n      if (material.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const { questionCount = 5, difficulty = \"medium\" } = req.body;\n      const subject = material.subjectId ? await storage.getSubject(material.subjectId) : null;\n      const subjectName = subject?.name || \"Geral\";\n\n      const generatedQuestions = await generateQuestionsFromContent(\n        material.content,\n        subjectName,\n        questionCount,\n        difficulty\n      );\n\n      const questionsToInsert = generatedQuestions.map(q => ({\n        subjectId: material.subjectId,\n        content: q.content,\n        type: q.type,\n        difficulty: q.difficulty,\n        options: q.options || null,\n        correctAnswer: q.correctAnswer || null,\n        explanation: q.explanation,\n        source: `Material: ${material.title}`,\n      }));\n\n      const createdQuestions = await storage.createQuestions(questionsToInsert);\n      res.json(createdQuestions);\n    } catch (error) {\n      console.error(\"Error generating questions:\", error);\n      res.status(500).json({ message: \"Failed to generate questions\" });\n    }\n  });\n\n  app.get(\"/api/exams\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const exams = await storage.getExams(userId);\n      res.json(exams);\n    } catch (error) {\n      console.error(\"Error fetching exams:\", error);\n      res.status(500).json({ message: \"Failed to fetch exams\" });\n    }\n  });\n\n  app.get(\"/api/exams/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const exam = await storage.getExam(req.params.id);\n      if (!exam) {\n        return res.status(404).json({ message: \"Exam not found\" });\n      }\n      if (exam.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      res.json(exam);\n    } catch (error) {\n      console.error(\"Error fetching exam:\", error);\n      res.status(500).json({ message: \"Failed to fetch exam\" });\n    }\n  });\n\n  app.get(\"/api/exams/:id/questions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const exam = await storage.getExam(req.params.id);\n      if (!exam) {\n        return res.status(404).json({ message: \"Exam not found\" });\n      }\n      if (exam.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      const examQuestions = await storage.getExamQuestions(req.params.id);\n      res.json(examQuestions);\n    } catch (error) {\n      console.error(\"Error fetching exam questions:\", error);\n      res.status(500).json({ message: \"Failed to fetch exam questions\" });\n    }\n  });\n\n  app.post(\"/api/exams\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      // Check subscription limits for free tier (paid tiers have unlimited)\n      // Also treat legacy \"pro\" tier as paid\n      const isPaidTier = user?.subscriptionTier === \"monthly\" || user?.subscriptionTier === \"annual\" || user?.subscriptionTier === \"pro\";\n      if (!isPaidTier) {\n        const exams = await storage.getExams(userId);\n        if (exams.length >= 1) {\n          return res.status(403).json({ \n            message: \"Limite de simulados atingido. Assine um plano para criar mais.\",\n            limitReached: true,\n          });\n        }\n      }\n\n      const data = insertExamSchema.parse({ ...req.body, userId });\n      const exam = await storage.createExam(data);\n      res.json(exam);\n    } catch (error) {\n      console.error(\"Error creating exam:\", error);\n      res.status(500).json({ message: \"Failed to create exam\" });\n    }\n  });\n\n  app.post(\"/api/exams/:id/add-questions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const exam = await storage.getExam(req.params.id);\n      if (!exam) {\n        return res.status(404).json({ message: \"Exam not found\" });\n      }\n      if (exam.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const { questionIds } = req.body;\n      if (!Array.isArray(questionIds)) {\n        return res.status(400).json({ message: \"questionIds must be an array\" });\n      }\n\n      const existingQuestions = await storage.getExamQuestions(req.params.id);\n      const startIndex = existingQuestions.length;\n\n      const examQuestionsData = questionIds.map((questionId: string, index: number) => ({\n        examId: req.params.id,\n        questionId,\n        orderIndex: startIndex + index,\n      }));\n\n      const created = await storage.createExamQuestions(examQuestionsData);\n      await storage.updateExam(req.params.id, { \n        status: \"ready\",\n        questionCount: startIndex + questionIds.length\n      });\n\n      res.json(created);\n    } catch (error) {\n      console.error(\"Error adding questions to exam:\", error);\n      res.status(500).json({ message: \"Failed to add questions\" });\n    }\n  });\n\n  app.delete(\"/api/exams/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const exam = await storage.getExam(req.params.id);\n      if (!exam) {\n        return res.status(404).json({ message: \"Exam not found\" });\n      }\n      if (exam.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      await storage.deleteExam(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting exam:\", error);\n      res.status(500).json({ message: \"Failed to delete exam\" });\n    }\n  });\n\n  app.get(\"/api/attempts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const attempts = await storage.getExamAttempts(userId);\n      res.json(attempts);\n    } catch (error) {\n      console.error(\"Error fetching attempts:\", error);\n      res.status(500).json({ message: \"Failed to fetch attempts\" });\n    }\n  });\n\n  app.get(\"/api/attempts/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const attempt = await storage.getExamAttempt(req.params.id);\n      if (!attempt) {\n        return res.status(404).json({ message: \"Attempt not found\" });\n      }\n      if (attempt.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      res.json(attempt);\n    } catch (error) {\n      console.error(\"Error fetching attempt:\", error);\n      res.status(500).json({ message: \"Failed to fetch attempt\" });\n    }\n  });\n\n  app.get(\"/api/attempts/:id/answers\", isAuthenticated, async (req: any, res) => {\n    try {\n      const attempt = await storage.getExamAttempt(req.params.id);\n      if (!attempt) {\n        return res.status(404).json({ message: \"Attempt not found\" });\n      }\n      if (attempt.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      const answers = await storage.getQuestionAnswers(req.params.id);\n      res.json(answers);\n    } catch (error) {\n      console.error(\"Error fetching answers:\", error);\n      res.status(500).json({ message: \"Failed to fetch answers\" });\n    }\n  });\n\n  app.post(\"/api/attempts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const data = insertExamAttemptSchema.parse({ ...req.body, userId });\n      const attempt = await storage.createExamAttempt(data);\n      res.json(attempt);\n    } catch (error) {\n      console.error(\"Error creating attempt:\", error);\n      res.status(500).json({ message: \"Failed to create attempt\" });\n    }\n  });\n\n  app.post(\"/api/attempts/:id/answer\", isAuthenticated, async (req: any, res) => {\n    try {\n      const attempt = await storage.getExamAttempt(req.params.id);\n      if (!attempt) {\n        return res.status(404).json({ message: \"Attempt not found\" });\n      }\n      if (attempt.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const { questionId, userAnswer } = req.body;\n      const question = await storage.getQuestion(questionId);\n      if (!question) {\n        return res.status(404).json({ message: \"Question not found\" });\n      }\n\n      let isCorrect: boolean | null = null;\n      let aiEvaluation: string | null = null;\n      let aiScore: number | null = null;\n\n      if (question.type === \"objective\") {\n        isCorrect = userAnswer === question.correctAnswer;\n      } else if (question.type === \"essay\" && userAnswer) {\n        const subject = question.subjectId ? await storage.getSubject(question.subjectId) : null;\n        const evaluation = await evaluateEssayAnswer(\n          question.content,\n          userAnswer,\n          subject?.name || \"Geral\"\n        );\n        aiScore = evaluation.score;\n        aiEvaluation = evaluation.evaluation;\n        isCorrect = aiScore >= 6;\n      }\n\n      const answer = await storage.createQuestionAnswer({\n        attemptId: req.params.id,\n        questionId,\n        userAnswer,\n        isCorrect,\n        aiEvaluation,\n        aiScore,\n      });\n\n      res.json(answer);\n    } catch (error) {\n      console.error(\"Error submitting answer:\", error);\n      res.status(500).json({ message: \"Failed to submit answer\" });\n    }\n  });\n\n  app.post(\"/api/attempts/:id/complete\", isAuthenticated, async (req: any, res) => {\n    try {\n      const attempt = await storage.getExamAttempt(req.params.id);\n      if (!attempt) {\n        return res.status(404).json({ message: \"Attempt not found\" });\n      }\n      if (attempt.userId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const answers = await storage.getQuestionAnswers(req.params.id);\n      const correctCount = answers.filter(a => a.isCorrect).length;\n      const incorrectCount = answers.filter(a => a.isCorrect === false).length;\n      const score = answers.length > 0 ? (correctCount / answers.length) * 100 : 0;\n\n      const { timeSpent } = req.body;\n\n      const updated = await storage.updateExamAttempt(req.params.id, {\n        status: \"completed\",\n        completedAt: new Date(),\n        score,\n        correctCount,\n        incorrectCount,\n        timeSpent,\n      });\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error completing attempt:\", error);\n      res.status(500).json({ message: \"Failed to complete attempt\" });\n    }\n  });\n\n  app.get(\"/api/performance\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const performance = await storage.getUserPerformance(userId);\n      res.json(performance);\n    } catch (error) {\n      console.error(\"Error fetching performance:\", error);\n      res.status(500).json({ message: \"Failed to fetch performance\" });\n    }\n  });\n\n  app.get(\"/api/stats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const stats = await storage.getUserStats(userId);\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch stats\" });\n    }\n  });\n\n  app.get(\"/api/recommendations\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const recommendations = await storage.getRecommendations(userId);\n      res.json(recommendations);\n    } catch (error) {\n      console.error(\"Error fetching recommendations:\", error);\n      res.status(500).json({ message: \"Failed to fetch recommendations\" });\n    }\n  });\n\n  app.post(\"/api/recommendations/generate\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      const performance = await storage.getUserPerformance(userId);\n      const subjects = await storage.getSubjects();\n\n      const performanceData = performance.map(p => {\n        const subject = subjects.find(s => s.id === p.subjectId);\n        return {\n          subjectName: subject?.name || \"Desconhecido\",\n          averageScore: p.averageScore || 0,\n          strengthLevel: p.strengthLevel || \"unknown\",\n        };\n      });\n\n      const recommendations = await generateStudyRecommendations(\n        performanceData,\n        user?.targetExam || \"Concurso Público\"\n      );\n\n      const created = await Promise.all(\n        recommendations.map(r =>\n          storage.createRecommendation({\n            userId,\n            type: r.type,\n            title: r.title,\n            description: r.description,\n            priority: r.priority,\n          })\n        )\n      );\n\n      res.json(created);\n    } catch (error) {\n      console.error(\"Error generating recommendations:\", error);\n      res.status(500).json({ message: \"Failed to generate recommendations\" });\n    }\n  });\n\n  app.patch(\"/api/recommendations/:id/read\", isAuthenticated, async (req, res) => {\n    try {\n      await storage.markRecommendationRead(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error marking recommendation read:\", error);\n      res.status(500).json({ message: \"Failed to mark recommendation read\" });\n    }\n  });\n\n  // Stripe endpoints\n  app.get(\"/api/subscription/plans\", async (_req, res) => {\n    try {\n      res.json({\n        free: {\n          name: \"Gratuito\",\n          price: 0,\n          priceFormatted: \"R$ 0\",\n          simuladosLimit: 1,\n          features: [\n            \"1 simulado gratuito\",\n            \"Acesso a questões de exemplo\",\n            \"Estatísticas básicas\",\n          ],\n        },\n        monthly: {\n          name: \"Mensal\",\n          price: 3900,\n          priceFormatted: \"R$ 39/mês\",\n          simuladosLimit: -1,\n          priceId: getMonthlyPriceId(),\n          features: [\n            \"Simulados ilimitados\",\n            \"Questões geradas por IA\",\n            \"Avaliação de redações por IA\",\n            \"Recomendações personalizadas\",\n            \"Estatísticas avançadas\",\n          ],\n        },\n        annual: {\n          name: \"Anual\",\n          price: 22800,\n          priceFormatted: \"R$ 19/mês (cobrado anualmente)\",\n          simuladosLimit: -1,\n          priceId: getAnnualPriceId(),\n          savings: \"Economize R$ 240/ano\",\n          features: [\n            \"Simulados ilimitados\",\n            \"Questões geradas por IA\",\n            \"Avaliação de redações por IA\",\n            \"Recomendações personalizadas\",\n            \"Estatísticas avançadas\",\n            \"Suporte prioritário\",\n          ],\n        },\n      });\n    } catch (error) {\n      console.error(\"Error fetching plans:\", error);\n      res.status(500).json({ message: \"Failed to fetch plans\" });\n    }\n  });\n\n  app.post(\"/api/subscription/create-checkout\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      const { planType } = req.body;\n\n      if (!planType || ![\"monthly\", \"annual\"].includes(planType)) {\n        return res.status(400).json({ message: \"Invalid plan type\" });\n      }\n\n      const priceId = planType === \"monthly\" ? getMonthlyPriceId() : getAnnualPriceId();\n      if (!priceId) {\n        return res.status(500).json({ message: \"Stripe prices not initialized\" });\n      }\n\n      // Get or create Stripe customer\n      let customerId = user?.stripeCustomerId;\n      if (!customerId) {\n        const customer = await stripe.customers.create({\n          email: user?.email || undefined,\n          name: `${user?.firstName || \"\"} ${user?.lastName || \"\"}`.trim() || undefined,\n          metadata: { userId },\n        });\n        customerId = customer.id;\n        await storage.updateUser(userId, { stripeCustomerId: customerId });\n      }\n\n      const baseUrl = process.env.REPLIT_DEV_DOMAIN \n        ? `https://${process.env.REPLIT_DEV_DOMAIN}`\n        : process.env.REPLIT_DOMAINS\n          ? `https://${process.env.REPLIT_DOMAINS.split(\",\")[0]}`\n          : \"http://localhost:5000\";\n\n      const session = await stripe.checkout.sessions.create({\n        customer: customerId,\n        mode: \"subscription\",\n        payment_method_types: [\"card\"],\n        line_items: [{ price: priceId, quantity: 1 }],\n        success_url: `${baseUrl}/subscription?success=true`,\n        cancel_url: `${baseUrl}/subscription?canceled=true`,\n        metadata: { userId, planType },\n      });\n\n      res.json({ url: session.url });\n    } catch (error) {\n      console.error(\"Error creating checkout session:\", error);\n      res.status(500).json({ message: \"Failed to create checkout session\" });\n    }\n  });\n\n  app.post(\"/api/subscription/create-portal\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      if (!user?.stripeCustomerId) {\n        return res.status(400).json({ message: \"No subscription found\" });\n      }\n\n      const baseUrl = process.env.REPLIT_DEV_DOMAIN \n        ? `https://${process.env.REPLIT_DEV_DOMAIN}`\n        : process.env.REPLIT_DOMAINS\n          ? `https://${process.env.REPLIT_DOMAINS.split(\",\")[0]}`\n          : \"http://localhost:5000\";\n\n      const session = await stripe.billingPortal.sessions.create({\n        customer: user.stripeCustomerId,\n        return_url: `${baseUrl}/subscription`,\n      });\n\n      res.json({ url: session.url });\n    } catch (error) {\n      console.error(\"Error creating portal session:\", error);\n      res.status(500).json({ message: \"Failed to create portal session\" });\n    }\n  });\n\n  app.post(\"/api/stripe/webhook\", async (req, res) => {\n    const sig = req.headers[\"stripe-signature\"];\n    const endpointSecret = process.env.STRIPE_WEBHOOK_SECRET;\n\n    let event;\n    try {\n      if (endpointSecret && sig) {\n        event = stripe.webhooks.constructEvent(req.body, sig, endpointSecret);\n      } else {\n        event = req.body;\n      }\n    } catch (err: any) {\n      console.error(\"Webhook signature verification failed:\", err.message);\n      return res.status(400).send(`Webhook Error: ${err.message}`);\n    }\n\n    switch (event.type) {\n      case \"checkout.session.completed\": {\n        const session = event.data.object;\n        const userId = session.metadata?.userId;\n        const planType = session.metadata?.planType;\n        const subscriptionId = session.subscription as string;\n\n        if (userId && subscriptionId) {\n          await storage.updateUser(userId, {\n            stripeSubscriptionId: subscriptionId,\n            subscriptionTier: planType === \"annual\" ? \"annual\" : \"monthly\",\n          });\n        }\n        break;\n      }\n\n      case \"customer.subscription.updated\":\n      case \"customer.subscription.deleted\": {\n        const subscription = event.data.object;\n        const customerId = subscription.customer as string;\n\n        // Find user by customer ID\n        const customers = await stripe.customers.retrieve(customerId);\n        const userId = (customers as any).metadata?.userId;\n\n        if (userId) {\n          const isActive = subscription.status === \"active\" || subscription.status === \"trialing\";\n          if (isActive) {\n            // Get the full subscription with expanded price data to determine tier\n            let priceId = subscription.items?.data?.[0]?.price?.id;\n            \n            // If price data is not expanded, fetch the subscription directly\n            if (!priceId) {\n              try {\n                const fullSubscription = await stripe.subscriptions.retrieve(subscription.id, {\n                  expand: [\"items.data.price\"],\n                });\n                priceId = fullSubscription.items?.data?.[0]?.price?.id;\n              } catch (e) {\n                console.error(\"Failed to retrieve subscription details:\", e);\n              }\n            }\n            \n            const monthlyPriceId = getMonthlyPriceId();\n            const annualPriceId = getAnnualPriceId();\n            \n            // Determine tier based on price ID, with fallback to monthly if unknown\n            let tier: \"monthly\" | \"annual\" = \"monthly\";\n            if (priceId === annualPriceId) {\n              tier = \"annual\";\n            } else if (priceId === monthlyPriceId) {\n              tier = \"monthly\";\n            }\n            \n            await storage.updateUser(userId, {\n              subscriptionTier: tier,\n              stripeSubscriptionId: subscription.id,\n            });\n          } else {\n            await storage.updateUser(userId, {\n              subscriptionTier: \"free\",\n              stripeSubscriptionId: null,\n            });\n          }\n        }\n        break;\n      }\n    }\n\n    res.json({ received: true });\n  });\n\n  // Check subscription limits\n  app.get(\"/api/subscription/can-create-exam\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      // Paid tiers (monthly, annual, or legacy pro) have unlimited simulados\n      if (user?.subscriptionTier === \"monthly\" || user?.subscriptionTier === \"annual\" || user?.subscriptionTier === \"pro\") {\n        return res.json({ canCreate: true, remaining: -1 });\n      }\n\n      // Free tier: limit to 1 simulado\n      const exams = await storage.getExams(userId);\n      const canCreate = exams.length < 1;\n\n      res.json({ \n        canCreate, \n        remaining: Math.max(0, 1 - exams.length),\n        limit: 1,\n        used: exams.length,\n      });\n    } catch (error) {\n      console.error(\"Error checking subscription limits:\", error);\n      res.status(500).json({ message: \"Failed to check limits\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":28034,"size_tokens":null},"client/src/pages/stats.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  LineChart,\n  Line,\n  PieChart,\n  Pie,\n  Cell,\n  RadarChart,\n  Radar,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n} from \"recharts\";\nimport {\n  TrendingUp,\n  TrendingDown,\n  Target,\n  Clock,\n  BookOpen,\n  Award,\n  Calendar,\n} from \"lucide-react\";\n\nconst performanceOverTime = [\n  { week: \"Sem 1\", acertos: 62, questoes: 100 },\n  { week: \"Sem 2\", acertos: 68, questoes: 120 },\n  { week: \"Sem 3\", acertos: 71, questoes: 150 },\n  { week: \"Sem 4\", acertos: 75, questoes: 180 },\n  { week: \"Sem 5\", acertos: 78, questoes: 200 },\n  { week: \"Sem 6\", acertos: 82, questoes: 220 },\n];\n\nconst subjectPerformance = [\n  { subject: \"Português\", score: 78, total: 150, color: \"hsl(var(--chart-1))\" },\n  { subject: \"Matemática\", score: 65, total: 120, color: \"hsl(var(--chart-2))\" },\n  { subject: \"Dir. Constitucional\", score: 82, total: 100, color: \"hsl(var(--chart-3))\" },\n  { subject: \"Dir. Administrativo\", score: 70, total: 90, color: \"hsl(var(--chart-4))\" },\n  { subject: \"Informática\", score: 90, total: 80, color: \"hsl(var(--chart-5))\" },\n  { subject: \"Raciocínio Lógico\", score: 72, total: 60, color: \"hsl(var(--chart-1))\" },\n];\n\nconst radarData = [\n  { subject: \"Português\", value: 78, fullMark: 100 },\n  { subject: \"Matemática\", value: 65, fullMark: 100 },\n  { subject: \"Direito\", value: 76, fullMark: 100 },\n  { subject: \"Informática\", value: 90, fullMark: 100 },\n  { subject: \"Lógica\", value: 72, fullMark: 100 },\n  { subject: \"Atualidades\", value: 68, fullMark: 100 },\n];\n\nconst difficultyBreakdown = [\n  { name: \"Fácil\", value: 85, color: \"hsl(var(--chart-2))\" },\n  { name: \"Médio\", value: 72, color: \"hsl(var(--chart-4))\" },\n  { name: \"Difícil\", value: 58, color: \"hsl(var(--chart-5))\" },\n];\n\nconst studyTimeData = [\n  { day: \"Seg\", horas: 2.5 },\n  { day: \"Ter\", horas: 3.0 },\n  { day: \"Qua\", horas: 2.0 },\n  { day: \"Qui\", horas: 3.5 },\n  { day: \"Sex\", horas: 2.5 },\n  { day: \"Sáb\", horas: 4.0 },\n  { day: \"Dom\", horas: 3.0 },\n];\n\nexport default function Stats() {\n  const stats = [\n    {\n      title: \"Taxa de Acertos Geral\",\n      value: \"78%\",\n      change: \"+5%\",\n      trend: \"up\",\n      icon: Target,\n    },\n    {\n      title: \"Questões Respondidas\",\n      value: \"1.247\",\n      change: \"+142 esta semana\",\n      trend: \"up\",\n      icon: BookOpen,\n    },\n    {\n      title: \"Tempo Total de Estudo\",\n      value: \"87h\",\n      change: \"+12h esta semana\",\n      trend: \"up\",\n      icon: Clock,\n    },\n    {\n      title: \"Simulados Completos\",\n      value: \"32\",\n      change: \"+4 esta semana\",\n      trend: \"up\",\n      icon: Award,\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-stats-title\">\n          Estatísticas de Desempenho\n        </h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Acompanhe sua evolução e identifique pontos de melhoria.\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat, index) => (\n          <Card key={index} data-testid={`card-stat-${index}`}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between gap-2 mb-4\">\n                <span className=\"text-sm font-medium text-muted-foreground\">{stat.title}</span>\n                <div className=\"h-9 w-9 rounded-lg bg-primary/10 flex items-center justify-center\">\n                  <stat.icon className=\"h-4 w-4 text-primary\" />\n                </div>\n              </div>\n              <div className=\"text-3xl font-bold\">{stat.value}</div>\n              <div className=\"flex items-center gap-1 mt-1\">\n                {stat.trend === \"up\" ? (\n                  <TrendingUp className=\"h-4 w-4 text-chart-2\" />\n                ) : (\n                  <TrendingDown className=\"h-4 w-4 text-destructive\" />\n                )}\n                <span className={`text-xs ${stat.trend === \"up\" ? \"text-chart-2\" : \"text-destructive\"}`}>\n                  {stat.change}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <Tabs defaultValue=\"performance\">\n        <TabsList>\n          <TabsTrigger value=\"performance\">Desempenho</TabsTrigger>\n          <TabsTrigger value=\"subjects\">Por Área</TabsTrigger>\n          <TabsTrigger value=\"time\">Tempo de Estudo</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"performance\" className=\"mt-6\">\n          <div className=\"grid gap-6 lg:grid-cols-2\">\n            <Card data-testid=\"card-evolution-chart\">\n              <CardHeader>\n                <CardTitle className=\"text-base\">Evolução ao Longo do Tempo</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-[300px]\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <LineChart data={performanceOverTime}>\n                      <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                      <XAxis dataKey=\"week\" className=\"text-xs\" />\n                      <YAxis className=\"text-xs\" domain={[0, 100]} />\n                      <Tooltip\n                        contentStyle={{\n                          backgroundColor: \"hsl(var(--popover))\",\n                          border: \"1px solid hsl(var(--border))\",\n                          borderRadius: \"var(--radius)\",\n                        }}\n                      />\n                      <Line\n                        type=\"monotone\"\n                        dataKey=\"acertos\"\n                        stroke=\"hsl(var(--chart-2))\"\n                        strokeWidth={2}\n                        dot={{ fill: \"hsl(var(--chart-2))\" }}\n                        name=\"% Acertos\"\n                      />\n                    </LineChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-radar-chart\">\n              <CardHeader>\n                <CardTitle className=\"text-base\">Perfil de Conhecimento</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-[300px]\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <RadarChart data={radarData}>\n                      <PolarGrid className=\"stroke-muted\" />\n                      <PolarAngleAxis dataKey=\"subject\" className=\"text-xs\" />\n                      <PolarRadiusAxis angle={30} domain={[0, 100]} className=\"text-xs\" />\n                      <Radar\n                        name=\"Desempenho\"\n                        dataKey=\"value\"\n                        stroke=\"hsl(var(--primary))\"\n                        fill=\"hsl(var(--primary))\"\n                        fillOpacity={0.3}\n                      />\n                    </RadarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"lg:col-span-2\" data-testid=\"card-difficulty-breakdown\">\n              <CardHeader>\n                <CardTitle className=\"text-base\">Desempenho por Dificuldade</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid gap-6 md:grid-cols-3\">\n                  {difficultyBreakdown.map((item, index) => (\n                    <div key={index} className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium\">{item.name}</span>\n                        <span className=\"text-2xl font-bold\" style={{ color: item.color }}>\n                          {item.value}%\n                        </span>\n                      </div>\n                      <Progress value={item.value} className=\"h-3\" />\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"subjects\" className=\"mt-6\">\n          <Card data-testid=\"card-subject-performance\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Desempenho por Área de Conhecimento</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                {subjectPerformance.map((subject, index) => (\n                  <div key={index} className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"font-medium\">{subject.subject}</span>\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {subject.total} questões\n                        </Badge>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-2xl font-bold\">{subject.score}%</span>\n                        {subject.score >= 70 ? (\n                          <TrendingUp className=\"h-4 w-4 text-chart-2\" />\n                        ) : (\n                          <TrendingDown className=\"h-4 w-4 text-destructive\" />\n                        )}\n                      </div>\n                    </div>\n                    <Progress value={subject.score} className=\"h-2\" />\n                    <div className=\"flex justify-between text-xs text-muted-foreground\">\n                      <span>\n                        {subject.score < 60 && \"Precisa de atenção\"}\n                        {subject.score >= 60 && subject.score < 80 && \"Bom desempenho\"}\n                        {subject.score >= 80 && \"Excelente!\"}\n                      </span>\n                      <span>Meta: 80%</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"time\" className=\"mt-6\">\n          <div className=\"grid gap-6 lg:grid-cols-2\">\n            <Card data-testid=\"card-weekly-time\">\n              <CardHeader>\n                <CardTitle className=\"text-base\">Tempo de Estudo Semanal</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-[300px]\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart data={studyTimeData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                      <XAxis dataKey=\"day\" className=\"text-xs\" />\n                      <YAxis className=\"text-xs\" />\n                      <Tooltip\n                        contentStyle={{\n                          backgroundColor: \"hsl(var(--popover))\",\n                          border: \"1px solid hsl(var(--border))\",\n                          borderRadius: \"var(--radius)\",\n                        }}\n                        formatter={(value: number) => [`${value}h`, \"Horas\"]}\n                      />\n                      <Bar dataKey=\"horas\" fill=\"hsl(var(--primary))\" radius={[4, 4, 0, 0]} />\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-time-summary\">\n              <CardHeader>\n                <CardTitle className=\"text-base\">Resumo do Tempo</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid gap-4 grid-cols-2\">\n                  <div className=\"p-4 rounded-lg border text-center\">\n                    <div className=\"text-3xl font-bold text-primary\">20.5h</div>\n                    <div className=\"text-sm text-muted-foreground\">Esta semana</div>\n                  </div>\n                  <div className=\"p-4 rounded-lg border text-center\">\n                    <div className=\"text-3xl font-bold\">2.9h</div>\n                    <div className=\"text-sm text-muted-foreground\">Média diária</div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-3\">\n                  <h4 className=\"font-medium flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4\" />\n                    Distribuição Semanal\n                  </h4>\n                  <div className=\"space-y-2\">\n                    {studyTimeData.map((day, index) => (\n                      <div key={index} className=\"flex items-center gap-3\">\n                        <span className=\"text-sm w-12\">{day.day}</span>\n                        <div className=\"flex-1 h-2 rounded-full bg-muted overflow-hidden\">\n                          <div\n                            className=\"h-full bg-primary rounded-full\"\n                            style={{ width: `${(day.horas / 4) * 100}%` }}\n                          />\n                        </div>\n                        <span className=\"text-sm text-muted-foreground w-12\">\n                          {day.horas}h\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"p-4 rounded-lg bg-primary/5 border border-primary/20\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Target className=\"h-4 w-4 text-primary\" />\n                    <span className=\"font-medium\">Meta semanal</span>\n                  </div>\n                  <Progress value={82} className=\"h-2 mb-2\" />\n                  <p className=\"text-xs text-muted-foreground\">\n                    20.5h de 25h (82% completo)\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":14141,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"design_guidelines.md":{"content":"# Design Guidelines: Brazilian Exam Preparation Platform\n\n## Design Approach\n\n**Selected Approach:** Design System (Utility-Focused)  \n**Primary References:** Linear (clean dashboards), Notion (content hierarchy), Modern SaaS patterns  \n**Rationale:** Educational platform prioritizing clarity, data comprehension, and focused study environment over visual flair\n\n## Core Design Principles\n\n1. **Clarity First:** Information-dense without overwhelming - use progressive disclosure\n2. **Study-Optimized:** Minimal distractions, readable typography, comfortable spacing\n3. **Data Transparency:** Charts and statistics must be instantly comprehensible\n4. **Trust & Professionalism:** Brazilian competitive exam students need credibility signals\n\n## Typography System\n\n**Font Families:**\n- Primary: Inter (headings, UI elements, data labels)\n- Secondary: system-ui fallback for body text and questions\n\n**Hierarchy:**\n- Hero/Page Titles: text-4xl md:text-5xl font-bold\n- Section Headers: text-2xl md:text-3xl font-semibold\n- Card Titles: text-lg font-semibold\n- Body Text: text-base leading-relaxed\n- Small Text/Labels: text-sm text-gray-600\n- Data/Stats: text-3xl md:text-4xl font-bold (for numbers)\n\n## Layout System\n\n**Spacing Primitives:** Use Tailwind units of 3, 4, 6, 8, 12, 16\n- Tight spacing: p-3, gap-3 (cards, compact lists)\n- Standard spacing: p-6, gap-6 (sections, forms)\n- Generous spacing: p-8, p-12 (page containers, feature sections)\n\n**Grid Structure:**\n- Dashboard: 12-column grid for flexible widget placement\n- Content max-width: max-w-7xl for main container\n- Sidebar: Fixed 256px (w-64) on desktop, collapsible on mobile\n- Card grids: grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n\n## Component Library\n\n### Navigation\n**Top Header:**\n- Fixed header with logo, main navigation, user profile dropdown\n- Height: h-16, with shadow and subtle border-bottom\n- Include notification bell icon and quick access to \"Novo Simulado\"\n\n**Sidebar (Dashboard Area):**\n- Fixed left sidebar with icon + label navigation\n- Sections: Dashboard, Simulados, Estatísticas, Materiais, Perfil, Assinatura\n- Active state: subtle background with left border accent\n- Collapsible on tablet/mobile with hamburger menu\n\n### Dashboard Components\n\n**Stat Cards:**\n- Grid of 3-4 cards showing key metrics (Simulados Realizados, Taxa de Acertos, Tempo de Estudo, Ranking)\n- Each card: rounded-xl border with p-6\n- Large number display with small label underneath\n- Optional icon in top-right corner\n\n**Progress Charts:**\n- Line chart for performance over time (use recharts or similar)\n- Bar chart for subject breakdown\n- Donut chart for question type distribution\n- Cards containing charts: p-6 with descriptive headers\n\n**Recent Activity Feed:**\n- List of recent mock exams with date, score, subject\n- Each item: subtle hover state, clickable to view details\n- Include small badge for pass/fail status\n\n### Mock Exam Interface\n\n**Question Display:**\n- Clean, distraction-free layout with question number navigation sidebar\n- Large, readable question text (text-lg leading-relaxed)\n- Answer options with radio buttons or letter-labeled cards (A, B, C, D, E)\n- Bottom action bar: Previous, Flag, Next buttons with progress indicator\n\n**Timer & Progress:**\n- Sticky top bar showing remaining time and question progress (15/50)\n- Visual progress bar showing completion percentage\n\n### Forms & Inputs\n\n**Standard Inputs:**\n- Height: h-12, rounded-lg with border\n- Focus state: ring-2 with subtle shadow\n- Labels: text-sm font-medium mb-2\n- Helper text: text-xs text-gray-500\n\n**File Upload (PDF):**\n- Drag-and-drop zone with dashed border\n- Icon + \"Arraste seu PDF aqui ou clique para selecionar\"\n- Show uploaded file with preview thumbnail and remove option\n\n**Buttons:**\n- Primary CTA: px-6 py-3 rounded-lg font-semibold\n- Secondary: outlined variant with same padding\n- Icon buttons: w-10 h-10 rounded-lg for actions\n\n### Content Cards\n\n**Study Material Cards:**\n- Thumbnail preview (if available) or icon placeholder\n- Title, upload date, file type badge\n- Action buttons: Gerar Resumo, Ver Detalhes, Excluir\n\n**Mock Exam Cards:**\n- Subject label as badge\n- Title with date created\n- Stats preview: questões, tempo estimado\n- Call-to-action: \"Iniciar Simulado\" button\n\n### Profile & Settings\n\n**Profile Section:**\n- Avatar upload area (circular, large)\n- Form fields in 2-column grid on desktop\n- Sections: Dados Pessoais, Área de Estudo, Meta de Aprovação\n\n**Subscription/Pricing:**\n- Feature comparison table with 3 tiers\n- Highlight recommended plan\n- Clear \"Assinar\" buttons with Stripe integration\n\n## Page-Specific Layouts\n\n### Landing Page (Marketing)\n- **Hero:** Full-width section with headline \"Prepare-se para Concursos com Inteligência Artificial\", subheadline, dual CTA (Começar Grátis + Ver Demo), hero image showing dashboard preview\n- **Features:** 3-column grid showcasing: Simulados Personalizados, IA Adaptativa, Correção Inteligente\n- **How It Works:** 4-step process with icons\n- **Pricing:** 3-tier comparison table\n- **Social Proof:** Testimonials from approved students with photos\n- **CTA Section:** Final conversion push with trial offer\n\n### Dashboard (Logged In)\n- Sidebar + main content area\n- Top row: 4 stat cards\n- Second row: 2-column (Performance Chart + Subject Breakdown)\n- Third row: Recent Simulados list + AI Suggestions panel\n\n### Mock Exam Creation\n- Step-by-step wizard: (1) Upload Material → (2) Configure → (3) Generate\n- Progress indicator at top\n- Large upload zone on step 1\n- Configuration form with subject selection, question count, difficulty on step 2\n\n## Icons\n**Library:** Heroicons (outline for navigation, solid for emphasis)  \n**Usage:** All navigation items, stat cards, feature highlights, form inputs\n\n## Images\n\n**Hero Section:** \n- Large dashboard preview screenshot showing charts and interface\n- Positioned on right side of hero, with text on left\n- Modern, clean mockup style (slight perspective, subtle shadow)\n\n**Feature Sections:**\n- Screenshot previews of key features (exam interface, AI feedback, dashboard)\n- Use actual UI screenshots with slight blur on sensitive data\n\n**Testimonials:**\n- Circular student photos (real or stock photos of Brazilian students)\n\n**Empty States:**\n- Friendly illustrations for no simulados yet, no materials uploaded\n\n## Animations\n**Minimal approach - use sparingly:**\n- Smooth page transitions (fade-in)\n- Chart data animation on load (staggered)\n- Button hover scale (scale-105)\n- No scroll-triggered animations\n- Loading states: simple spinners, no complex animations","path":null,"size_bytes":6571,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/landing\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Profile from \"@/pages/profile\";\nimport Exams from \"@/pages/exams\";\nimport ExamCreate from \"@/pages/exam-create\";\nimport Materials from \"@/pages/materials\";\nimport Stats from \"@/pages/stats\";\nimport Recommendations from \"@/pages/recommendations\";\nimport Subscription from \"@/pages/subscription\";\n\nfunction LoadingScreen() {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\n      <div className=\"text-center space-y-4\">\n        <Skeleton className=\"h-12 w-12 rounded-lg mx-auto\" />\n        <Skeleton className=\"h-4 w-32 mx-auto\" />\n      </div>\n    </div>\n  );\n}\n\nfunction AuthenticatedLayout({ children }: { children: React.ReactNode }) {\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex min-h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex flex-col flex-1 min-w-0\">\n          <header className=\"sticky top-0 z-40 flex h-16 items-center justify-between gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <ThemeToggle />\n          </header>\n          <main className=\"flex-1 p-4 md:p-6 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) {\n    return <LoadingScreen />;\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <Switch>\n        <Route path=\"/\" component={Landing} />\n        <Route component={Landing} />\n      </Switch>\n    );\n  }\n\n  return (\n    <AuthenticatedLayout>\n      <Switch>\n        <Route path=\"/\" component={Dashboard} />\n        <Route path=\"/profile\" component={Profile} />\n        <Route path=\"/exams\" component={Exams} />\n        <Route path=\"/exams/new\" component={ExamCreate} />\n        <Route path=\"/materials\" component={Materials} />\n        <Route path=\"/materials/upload\" component={Materials} />\n        <Route path=\"/stats\" component={Stats} />\n        <Route path=\"/recommendations\" component={Recommendations} />\n        <Route path=\"/subscription\" component={Subscription} />\n        <Route component={NotFound} />\n      </Switch>\n    </AuthenticatedLayout>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"light\" storageKey=\"simulai-theme\">\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":3439,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 222 14% 12%;\n  --border: 220 13% 91%;\n  --card: 0 0% 98%;\n  --card-foreground: 222 14% 12%;\n  --card-border: 220 13% 94%;\n  --sidebar: 220 13% 96%;\n  --sidebar-foreground: 222 14% 12%;\n  --sidebar-border: 220 13% 92%;\n  --sidebar-primary: 217 91% 50%;\n  --sidebar-primary-foreground: 210 40% 98%;\n  --sidebar-accent: 220 13% 92%;\n  --sidebar-accent-foreground: 222 14% 12%;\n  --sidebar-ring: 217 91% 50%;\n  --popover: 220 13% 94%;\n  --popover-foreground: 222 14% 12%;\n  --popover-border: 220 13% 90%;\n  --primary: 217 91% 50%;\n  --primary-foreground: 210 40% 98%;\n  --secondary: 220 13% 90%;\n  --secondary-foreground: 222 14% 12%;\n  --muted: 220 13% 92%;\n  --muted-foreground: 222 14% 40%;\n  --accent: 217 20% 94%;\n  --accent-foreground: 222 14% 12%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 220 13% 85%;\n  --ring: 217 91% 50%;\n  --chart-1: 217 91% 40%;\n  --chart-2: 173 58% 35%;\n  --chart-3: 271 70% 40%;\n  --chart-4: 32 95% 40%;\n  --chart-5: 340 82% 40%;\n  --font-sans: Inter, system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: 'JetBrains Mono', Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 2px 4px -1px hsl(220 13% 91% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 4px 6px -1px hsl(220 13% 91% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 8px 10px -1px hsl(220 13% 91% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 222 14% 4%;\n  --foreground: 210 40% 98%;\n  --border: 222 14% 12%;\n  --card: 222 14% 6%;\n  --card-foreground: 210 40% 98%;\n  --card-border: 222 14% 10%;\n  --sidebar: 222 14% 8%;\n  --sidebar-foreground: 210 40% 98%;\n  --sidebar-border: 222 14% 12%;\n  --sidebar-primary: 217 91% 55%;\n  --sidebar-primary-foreground: 210 40% 98%;\n  --sidebar-accent: 222 14% 12%;\n  --sidebar-accent-foreground: 210 40% 98%;\n  --sidebar-ring: 217 91% 55%;\n  --popover: 222 14% 10%;\n  --popover-foreground: 210 40% 98%;\n  --popover-border: 222 14% 14%;\n  --primary: 217 91% 50%;\n  --primary-foreground: 210 40% 98%;\n  --secondary: 222 14% 14%;\n  --secondary-foreground: 210 40% 98%;\n  --muted: 222 14% 12%;\n  --muted-foreground: 215 20% 65%;\n  --accent: 217 15% 12%;\n  --accent-foreground: 210 40% 98%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 222 14% 20%;\n  --ring: 217 91% 55%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 173 58% 60%;\n  --chart-3: 271 70% 65%;\n  --chart-4: 32 95% 60%;\n  --chart-5: 340 82% 60%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(222 14% 4% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(222 14% 4% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(222 14% 4% / 0.00), 0px 1px 2px -1px hsl(222 14% 4% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(222 14% 4% / 0.00), 0px 1px 2px -1px hsl(222 14% 4% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(222 14% 4% / 0.00), 0px 2px 4px -1px hsl(222 14% 4% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(222 14% 4% / 0.00), 0px 4px 6px -1px hsl(222 14% 4% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(222 14% 4% / 0.00), 0px 8px 10px -1px hsl(222 14% 4% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(222 14% 4% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10779,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport { relations } from 'drizzle-orm';\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  text,\n  integer,\n  boolean,\n  real,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// Users table for Replit Auth\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  studyArea: varchar(\"study_area\"),\n  targetExam: varchar(\"target_exam\"),\n  studyGoal: text(\"study_goal\"),\n  subscriptionTier: varchar(\"subscription_tier\").default(\"free\"),\n  stripeCustomerId: varchar(\"stripe_customer_id\"),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Subject areas for questions\nexport const subjects = pgTable(\"subjects\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  icon: varchar(\"icon\"),\n  color: varchar(\"color\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Questions bank\nexport const questions = pgTable(\"questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  subjectId: varchar(\"subject_id\").references(() => subjects.id),\n  content: text(\"content\").notNull(),\n  type: varchar(\"type\").notNull(), // 'objective' or 'essay'\n  difficulty: varchar(\"difficulty\").notNull(), // 'easy', 'medium', 'hard'\n  options: jsonb(\"options\"), // For objective questions: [{letter: 'A', text: '...'}]\n  correctAnswer: varchar(\"correct_answer\"), // Letter for objective, null for essay\n  explanation: text(\"explanation\"),\n  source: varchar(\"source\"), // e.g., \"ENEM 2023\", \"Concurso TRF 2022\"\n  year: integer(\"year\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Study materials (PDFs, notes)\nexport const materials = pgTable(\"materials\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  title: varchar(\"title\").notNull(),\n  type: varchar(\"type\").notNull(), // 'pdf', 'note', 'slide'\n  fileName: varchar(\"file_name\"),\n  fileUrl: varchar(\"file_url\"),\n  content: text(\"content\"), // Extracted text content\n  summary: text(\"summary\"), // AI-generated summary\n  subjectId: varchar(\"subject_id\").references(() => subjects.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Exams (simulados)\nexport const exams = pgTable(\"exams\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  subjectIds: jsonb(\"subject_ids\").$type<string[]>(),\n  questionCount: integer(\"question_count\").notNull(),\n  timeLimit: integer(\"time_limit\"), // in minutes\n  difficulty: varchar(\"difficulty\"),\n  isFromMaterial: boolean(\"is_from_material\").default(false),\n  materialId: varchar(\"material_id\").references(() => materials.id),\n  status: varchar(\"status\").default(\"draft\"), // 'draft', 'ready', 'completed'\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Exam questions junction table\nexport const examQuestions = pgTable(\"exam_questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  examId: varchar(\"exam_id\").references(() => exams.id).notNull(),\n  questionId: varchar(\"question_id\").references(() => questions.id).notNull(),\n  orderIndex: integer(\"order_index\").notNull(),\n});\n\n// Exam attempts/results\nexport const examAttempts = pgTable(\"exam_attempts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  examId: varchar(\"exam_id\").references(() => exams.id).notNull(),\n  startedAt: timestamp(\"started_at\").defaultNow(),\n  completedAt: timestamp(\"completed_at\"),\n  score: real(\"score\"),\n  correctCount: integer(\"correct_count\"),\n  incorrectCount: integer(\"incorrect_count\"),\n  timeSpent: integer(\"time_spent\"), // in seconds\n  status: varchar(\"status\").default(\"in_progress\"), // 'in_progress', 'completed', 'abandoned'\n});\n\n// Individual question answers\nexport const questionAnswers = pgTable(\"question_answers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  attemptId: varchar(\"attempt_id\").references(() => examAttempts.id).notNull(),\n  questionId: varchar(\"question_id\").references(() => questions.id).notNull(),\n  userAnswer: text(\"user_answer\"),\n  isCorrect: boolean(\"is_correct\"),\n  aiEvaluation: text(\"ai_evaluation\"), // AI feedback for essay questions\n  aiScore: real(\"ai_score\"), // Score for essay questions (0-10)\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User performance stats per subject\nexport const userPerformance = pgTable(\"user_performance\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  subjectId: varchar(\"subject_id\").references(() => subjects.id).notNull(),\n  totalQuestions: integer(\"total_questions\").default(0),\n  correctAnswers: integer(\"correct_answers\").default(0),\n  averageScore: real(\"average_score\").default(0),\n  lastStudied: timestamp(\"last_studied\"),\n  strengthLevel: varchar(\"strength_level\").default(\"unknown\"), // 'weak', 'medium', 'strong'\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// AI-generated recommendations\nexport const aiRecommendations = pgTable(\"ai_recommendations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  type: varchar(\"type\").notNull(), // 'study_focus', 'material', 'exam'\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  subjectId: varchar(\"subject_id\").references(() => subjects.id),\n  priority: integer(\"priority\").default(1),\n  isRead: boolean(\"is_read\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  materials: many(materials),\n  exams: many(exams),\n  examAttempts: many(examAttempts),\n  performance: many(userPerformance),\n  recommendations: many(aiRecommendations),\n}));\n\nexport const subjectsRelations = relations(subjects, ({ many }) => ({\n  questions: many(questions),\n  materials: many(materials),\n  performance: many(userPerformance),\n}));\n\nexport const questionsRelations = relations(questions, ({ one, many }) => ({\n  subject: one(subjects, {\n    fields: [questions.subjectId],\n    references: [subjects.id],\n  }),\n  examQuestions: many(examQuestions),\n  answers: many(questionAnswers),\n}));\n\nexport const materialsRelations = relations(materials, ({ one }) => ({\n  user: one(users, {\n    fields: [materials.userId],\n    references: [users.id],\n  }),\n  subject: one(subjects, {\n    fields: [materials.subjectId],\n    references: [subjects.id],\n  }),\n}));\n\nexport const examsRelations = relations(exams, ({ one, many }) => ({\n  user: one(users, {\n    fields: [exams.userId],\n    references: [users.id],\n  }),\n  material: one(materials, {\n    fields: [exams.materialId],\n    references: [materials.id],\n  }),\n  examQuestions: many(examQuestions),\n  attempts: many(examAttempts),\n}));\n\nexport const examQuestionsRelations = relations(examQuestions, ({ one }) => ({\n  exam: one(exams, {\n    fields: [examQuestions.examId],\n    references: [exams.id],\n  }),\n  question: one(questions, {\n    fields: [examQuestions.questionId],\n    references: [questions.id],\n  }),\n}));\n\nexport const examAttemptsRelations = relations(examAttempts, ({ one, many }) => ({\n  user: one(users, {\n    fields: [examAttempts.userId],\n    references: [users.id],\n  }),\n  exam: one(exams, {\n    fields: [examAttempts.examId],\n    references: [exams.id],\n  }),\n  answers: many(questionAnswers),\n}));\n\nexport const questionAnswersRelations = relations(questionAnswers, ({ one }) => ({\n  attempt: one(examAttempts, {\n    fields: [questionAnswers.attemptId],\n    references: [examAttempts.id],\n  }),\n  question: one(questions, {\n    fields: [questionAnswers.questionId],\n    references: [questions.id],\n  }),\n}));\n\nexport const userPerformanceRelations = relations(userPerformance, ({ one }) => ({\n  user: one(users, {\n    fields: [userPerformance.userId],\n    references: [users.id],\n  }),\n  subject: one(subjects, {\n    fields: [userPerformance.subjectId],\n    references: [subjects.id],\n  }),\n}));\n\nexport const aiRecommendationsRelations = relations(aiRecommendations, ({ one }) => ({\n  user: one(users, {\n    fields: [aiRecommendations.userId],\n    references: [users.id],\n  }),\n  subject: one(subjects, {\n    fields: [aiRecommendations.subjectId],\n    references: [subjects.id],\n  }),\n}));\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertSubjectSchema = createInsertSchema(subjects).omit({ id: true, createdAt: true });\nexport const insertQuestionSchema = createInsertSchema(questions).omit({ id: true, createdAt: true });\nexport const insertMaterialSchema = createInsertSchema(materials).omit({ id: true, createdAt: true });\nexport const insertExamSchema = createInsertSchema(exams).omit({ id: true, createdAt: true });\nexport const insertExamQuestionSchema = createInsertSchema(examQuestions).omit({ id: true });\nexport const insertExamAttemptSchema = createInsertSchema(examAttempts).omit({ id: true, startedAt: true });\nexport const insertQuestionAnswerSchema = createInsertSchema(questionAnswers).omit({ id: true, createdAt: true });\nexport const insertUserPerformanceSchema = createInsertSchema(userPerformance).omit({ id: true, updatedAt: true });\nexport const insertAiRecommendationSchema = createInsertSchema(aiRecommendations).omit({ id: true, createdAt: true });\n\n// Types\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\nexport type Subject = typeof subjects.$inferSelect;\nexport type InsertSubject = z.infer<typeof insertSubjectSchema>;\nexport type Question = typeof questions.$inferSelect;\nexport type InsertQuestion = z.infer<typeof insertQuestionSchema>;\nexport type Material = typeof materials.$inferSelect;\nexport type InsertMaterial = z.infer<typeof insertMaterialSchema>;\nexport type Exam = typeof exams.$inferSelect;\nexport type InsertExam = z.infer<typeof insertExamSchema>;\nexport type ExamQuestion = typeof examQuestions.$inferSelect;\nexport type InsertExamQuestion = z.infer<typeof insertExamQuestionSchema>;\nexport type ExamAttempt = typeof examAttempts.$inferSelect;\nexport type InsertExamAttempt = z.infer<typeof insertExamAttemptSchema>;\nexport type QuestionAnswer = typeof questionAnswers.$inferSelect;\nexport type InsertQuestionAnswer = z.infer<typeof insertQuestionAnswerSchema>;\nexport type UserPerformance = typeof userPerformance.$inferSelect;\nexport type InsertUserPerformance = z.infer<typeof insertUserPerformanceSchema>;\nexport type AiRecommendation = typeof aiRecommendations.$inferSelect;\nexport type InsertAiRecommendation = z.infer<typeof insertAiRecommendationSchema>;\n","path":null,"size_bytes":11573,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/app-sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from \"@/components/ui/sidebar\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  LayoutDashboard,\n  FileText,\n  BookOpen,\n  BarChart3,\n  User,\n  CreditCard,\n  Brain,\n  LogOut,\n  ChevronUp,\n  Sparkles,\n  Target\n} from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nconst menuItems = [\n  {\n    title: \"Dashboard\",\n    url: \"/\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Simulados\",\n    url: \"/exams\",\n    icon: FileText,\n  },\n  {\n    title: \"Materiais\",\n    url: \"/materials\",\n    icon: BookOpen,\n  },\n  {\n    title: \"Estatísticas\",\n    url: \"/stats\",\n    icon: BarChart3,\n  },\n  {\n    title: \"Recomendações IA\",\n    url: \"/recommendations\",\n    icon: Sparkles,\n  },\n];\n\nconst settingsItems = [\n  {\n    title: \"Perfil\",\n    url: \"/profile\",\n    icon: User,\n  },\n  {\n    title: \"Assinatura\",\n    url: \"/subscription\",\n    icon: CreditCard,\n  },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { user } = useAuth();\n\n  const getInitials = () => {\n    if (!user) return \"U\";\n    const first = user.firstName?.charAt(0) || \"\";\n    const last = user.lastName?.charAt(0) || \"\";\n    return (first + last).toUpperCase() || user.email?.charAt(0)?.toUpperCase() || \"U\";\n  };\n\n  const getDisplayName = () => {\n    if (!user) return \"Usuário\";\n    if (user.firstName) {\n      return user.lastName ? `${user.firstName} ${user.lastName}` : user.firstName;\n    }\n    return user.email || \"Usuário\";\n  };\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4\">\n        <Link href=\"/\" className=\"flex items-center gap-2\">\n          <div className=\"flex h-9 w-9 items-center justify-center rounded-md bg-primary\">\n            <Brain className=\"h-5 w-5 text-primary-foreground\" />\n          </div>\n          <span className=\"text-lg font-bold\" data-testid=\"sidebar-logo\">Simulai</span>\n        </Link>\n      </SidebarHeader>\n      \n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Menu Principal</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton \n                    asChild \n                    isActive={location === item.url}\n                    data-testid={`nav-${item.url.replace('/', '') || 'dashboard'}`}\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>Configurações</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {settingsItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton \n                    asChild \n                    isActive={location === item.url}\n                    data-testid={`nav-${item.url.replace('/', '')}`}\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup className=\"mt-auto\">\n          <SidebarGroupContent>\n            <div className=\"rounded-lg border bg-card p-4 mx-2\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Target className=\"h-4 w-4 text-primary\" />\n                <span className=\"text-sm font-medium\">Meta do Mês</span>\n              </div>\n              <p className=\"text-xs text-muted-foreground mb-2\">\n                Complete 20 simulados para desbloquear estatísticas avançadas\n              </p>\n              <div className=\"h-2 rounded-full bg-muted overflow-hidden\">\n                <div className=\"h-full bg-primary rounded-full\" style={{ width: '35%' }} />\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">7/20 completos</p>\n            </div>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4\">\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"w-full justify-start gap-2 h-auto p-2\" data-testid=\"button-user-menu\">\n              <Avatar className=\"h-8 w-8\">\n                <AvatarImage src={user?.profileImageUrl || undefined} alt={getDisplayName()} />\n                <AvatarFallback className=\"text-xs\">{getInitials()}</AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1 text-left\">\n                <p className=\"text-sm font-medium truncate\">{getDisplayName()}</p>\n                <p className=\"text-xs text-muted-foreground truncate\">{user?.email}</p>\n              </div>\n              <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-56\">\n            <DropdownMenuItem asChild>\n              <Link href=\"/profile\" className=\"flex items-center gap-2 cursor-pointer\">\n                <User className=\"h-4 w-4\" />\n                <span>Meu Perfil</span>\n              </Link>\n            </DropdownMenuItem>\n            <DropdownMenuItem asChild>\n              <Link href=\"/subscription\" className=\"flex items-center gap-2 cursor-pointer\">\n                <CreditCard className=\"h-4 w-4\" />\n                <span>Assinatura</span>\n              </Link>\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem asChild>\n              <a href=\"/api/logout\" className=\"flex items-center gap-2 cursor-pointer text-destructive\">\n                <LogOut className=\"h-4 w-4\" />\n                <span>Sair</span>\n              </a>\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","path":null,"size_bytes":6735,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(claims: any) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  const registeredStrategies = new Set<string>();\n\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","path":null,"size_bytes":4366,"size_tokens":null},"client/src/pages/recommendations.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Sparkles,\n  Target,\n  BookOpen,\n  TrendingUp,\n  AlertCircle,\n  Clock,\n  CheckCircle2,\n  ArrowRight,\n  Brain,\n  Lightbulb,\n  Flame,\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nconst weakAreas = [\n  {\n    id: \"1\",\n    subject: \"Matemática Financeira\",\n    score: 58,\n    questionsAnswered: 45,\n    suggestion: \"Pratique mais questões de juros compostos e séries de pagamento.\",\n    priority: \"high\",\n  },\n  {\n    id: \"2\",\n    subject: \"Direito Civil\",\n    score: 62,\n    questionsAnswered: 38,\n    suggestion: \"Revise os conceitos de contratos e obrigações.\",\n    priority: \"high\",\n  },\n  {\n    id: \"3\",\n    subject: \"Atualidades\",\n    score: 68,\n    questionsAnswered: 52,\n    suggestion: \"Acompanhe mais notícias sobre economia e política.\",\n    priority: \"medium\",\n  },\n];\n\nconst studySuggestions = [\n  {\n    id: \"1\",\n    type: \"material\",\n    title: \"Revisar Apostila de Matemática\",\n    description: \"Baseado no seu desempenho, recomendamos revisar o capítulo sobre juros compostos.\",\n    icon: BookOpen,\n    action: \"Ver Material\",\n    link: \"/materials\",\n  },\n  {\n    id: \"2\",\n    type: \"exam\",\n    title: \"Simulado Focado em Pontos Fracos\",\n    description: \"Um simulado personalizado com questões das áreas que você mais precisa praticar.\",\n    icon: Target,\n    action: \"Iniciar Simulado\",\n    link: \"/exams/new\",\n  },\n  {\n    id: \"3\",\n    type: \"topic\",\n    title: \"Estudo Direcionado: Contratos\",\n    description: \"Questões específicas sobre teoria dos contratos no Direito Civil.\",\n    icon: Lightbulb,\n    action: \"Estudar Agora\",\n    link: \"/exams\",\n  },\n];\n\nconst dailyChallenges = [\n  {\n    id: \"1\",\n    title: \"10 questões de Português\",\n    progress: 7,\n    total: 10,\n    xp: 50,\n    completed: false,\n  },\n  {\n    id: \"2\",\n    title: \"Revisar 1 material\",\n    progress: 1,\n    total: 1,\n    xp: 30,\n    completed: true,\n  },\n  {\n    id: \"3\",\n    title: \"Completar 1 simulado\",\n    progress: 0,\n    total: 1,\n    xp: 100,\n    completed: false,\n  },\n];\n\nconst insights = [\n  {\n    id: \"1\",\n    icon: TrendingUp,\n    title: \"Seu desempenho melhorou 12%\",\n    description: \"Nas últimas 2 semanas você teve uma melhora significativa em Direito Constitucional.\",\n    type: \"positive\",\n  },\n  {\n    id: \"2\",\n    icon: Clock,\n    title: \"Melhor horário de estudo\",\n    description: \"Seus melhores resultados ocorrem entre 19h e 21h. Tente manter esse padrão.\",\n    type: \"info\",\n  },\n  {\n    id: \"3\",\n    icon: Flame,\n    title: \"Sequência de 7 dias!\",\n    description: \"Você estudou por 7 dias consecutivos. Continue assim para alcançar sua meta!\",\n    type: \"achievement\",\n  },\n];\n\nexport default function Recommendations() {\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\":\n        return \"destructive\";\n      case \"medium\":\n        return \"secondary\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getInsightColor = (type: string) => {\n    switch (type) {\n      case \"positive\":\n        return \"text-chart-2\";\n      case \"achievement\":\n        return \"text-chart-4\";\n      default:\n        return \"text-primary\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n          <Sparkles className=\"h-5 w-5 text-primary\" />\n        </div>\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-recommendations-title\">\n            Recomendações da IA\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Sugestões personalizadas para otimizar seus estudos.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        <div className=\"lg:col-span-2 space-y-6\">\n          <Card data-testid=\"card-weak-areas\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <AlertCircle className=\"h-5 w-5 text-destructive\" />\n                Áreas que Precisam de Atenção\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {weakAreas.map((area) => (\n                <div\n                  key={area.id}\n                  className=\"p-4 rounded-lg border space-y-3\"\n                  data-testid={`weak-area-${area.id}`}\n                >\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h4 className=\"font-semibold\">{area.subject}</h4>\n                        <Badge variant={getPriorityColor(area.priority) as any}>\n                          {area.priority === \"high\" ? \"Prioridade Alta\" : \"Prioridade Média\"}\n                        </Badge>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {area.questionsAnswered} questões respondidas\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold\" style={{ color: area.score < 60 ? \"hsl(var(--destructive))\" : \"hsl(var(--chart-4))\" }}>\n                        {area.score}%\n                      </div>\n                      <div className=\"text-xs text-muted-foreground\">Acertos</div>\n                    </div>\n                  </div>\n                  <Progress value={area.score} className=\"h-2\" />\n                  <div className=\"flex items-start gap-2 p-3 rounded-lg bg-muted/50\">\n                    <Lightbulb className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <p className=\"text-sm\">{area.suggestion}</p>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-study-suggestions\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <Brain className=\"h-5 w-5 text-primary\" />\n                Sugestões de Estudo\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {studySuggestions.map((suggestion) => (\n                <div\n                  key={suggestion.id}\n                  className=\"flex items-center gap-4 p-4 rounded-lg border hover-elevate\"\n                  data-testid={`suggestion-${suggestion.id}`}\n                >\n                  <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <suggestion.icon className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"font-semibold\">{suggestion.title}</h4>\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                      {suggestion.description}\n                    </p>\n                  </div>\n                  <Link href={suggestion.link}>\n                    <Button className=\"gap-2 flex-shrink-0\">\n                      {suggestion.action}\n                      <ArrowRight className=\"h-4 w-4\" />\n                    </Button>\n                  </Link>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-insights\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <Sparkles className=\"h-5 w-5 text-primary\" />\n                Insights\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {insights.map((insight) => (\n                <div\n                  key={insight.id}\n                  className=\"flex items-start gap-3 p-4 rounded-lg border\"\n                  data-testid={`insight-${insight.id}`}\n                >\n                  <div className={`mt-0.5 ${getInsightColor(insight.type)}`}>\n                    <insight.icon className=\"h-5 w-5\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-medium\">{insight.title}</h4>\n                    <p className=\"text-sm text-muted-foreground\">{insight.description}</p>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"space-y-6\">\n          <Card data-testid=\"card-daily-challenges\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-base\">\n                <Target className=\"h-5 w-5 text-primary\" />\n                Desafios do Dia\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {dailyChallenges.map((challenge) => (\n                <div\n                  key={challenge.id}\n                  className={`p-4 rounded-lg border ${challenge.completed ? \"bg-chart-2/5 border-chart-2/20\" : \"\"}`}\n                  data-testid={`challenge-${challenge.id}`}\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      {challenge.completed ? (\n                        <CheckCircle2 className=\"h-5 w-5 text-chart-2\" />\n                      ) : (\n                        <div className=\"h-5 w-5 rounded-full border-2 border-muted-foreground/30\" />\n                      )}\n                      <span className={`font-medium ${challenge.completed ? \"line-through text-muted-foreground\" : \"\"}`}>\n                        {challenge.title}\n                      </span>\n                    </div>\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      +{challenge.xp} XP\n                    </Badge>\n                  </div>\n                  {!challenge.completed && (\n                    <>\n                      <Progress value={(challenge.progress / challenge.total) * 100} className=\"h-2\" />\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {challenge.progress}/{challenge.total} completo\n                      </p>\n                    </>\n                  )}\n                </div>\n              ))}\n\n              <div className=\"p-4 rounded-lg bg-muted/50 text-center\">\n                <p className=\"text-sm font-medium\">Complete todos os desafios</p>\n                <p className=\"text-xs text-muted-foreground\">e ganhe um bônus de 50 XP</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-study-streak\">\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"inline-flex items-center justify-center h-16 w-16 rounded-full bg-chart-4/10 mb-4\">\n                <Flame className=\"h-8 w-8 text-chart-4\" />\n              </div>\n              <h3 className=\"text-2xl font-bold\">7 dias</h3>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                de sequência de estudos\n              </p>\n              <div className=\"flex justify-center gap-1\">\n                {[1, 2, 3, 4, 5, 6, 7].map((day) => (\n                  <div\n                    key={day}\n                    className=\"h-8 w-8 rounded-full bg-chart-4 flex items-center justify-center\"\n                  >\n                    <CheckCircle2 className=\"h-4 w-4 text-white\" />\n                  </div>\n                ))}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-4\">\n                Continue estudando para manter sua sequência!\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-primary text-primary-foreground\" data-testid=\"card-ai-tip\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Sparkles className=\"h-5 w-5\" />\n                <span className=\"font-semibold\">Dica da IA</span>\n              </div>\n              <p className=\"text-sm text-primary-foreground/90\">\n                Baseado no seu padrão de estudos, recomendo fazer pausas de 10 minutos \n                a cada 50 minutos de estudo para melhor retenção do conteúdo.\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12670,"size_tokens":null},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","path":null,"size_bytes":116,"size_tokens":null},"server/gemini.ts":{"content":"import { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\nexport interface GeneratedQuestion {\n  content: string;\n  type: \"objective\" | \"essay\";\n  difficulty: \"easy\" | \"medium\" | \"hard\";\n  options?: { letter: string; text: string }[];\n  correctAnswer?: string;\n  explanation: string;\n}\n\nexport interface StudyRecommendation {\n  type: \"study_focus\" | \"material\" | \"exam\";\n  title: string;\n  description: string;\n  priority: number;\n}\n\nexport async function generateQuestionsFromContent(\n  content: string,\n  subjectName: string,\n  questionCount: number = 5,\n  difficulty: string = \"medium\"\n): Promise<GeneratedQuestion[]> {\n  const prompt = `Você é um especialista em concursos públicos brasileiros. Baseado no seguinte conteúdo de estudo, gere ${questionCount} questões de nível ${difficulty} sobre o tema \"${subjectName}\".\n\nConteúdo:\n${content}\n\nPara cada questão, forneça no formato JSON:\n- content: texto da questão\n- type: \"objective\" para múltipla escolha ou \"essay\" para discursiva\n- difficulty: \"${difficulty}\"\n- options: array de objetos {letter: \"A/B/C/D/E\", text: \"texto da alternativa\"} (apenas para objective)\n- correctAnswer: letra da resposta correta (apenas para objective)\n- explanation: explicação detalhada da resposta\n\nGere ${Math.ceil(questionCount * 0.8)} questões objetivas e ${Math.floor(questionCount * 0.2)} questões discursivas.\nResponda APENAS com um array JSON válido.`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n      config: {\n        responseMimeType: \"application/json\",\n      },\n    });\n\n    const text = response.text || \"[]\";\n    return JSON.parse(text);\n  } catch (error) {\n    console.error(\"Error generating questions:\", error);\n    return [];\n  }\n}\n\nexport async function evaluateEssayAnswer(\n  question: string,\n  userAnswer: string,\n  subjectName: string\n): Promise<{ score: number; evaluation: string }> {\n  const prompt = `Você é um examinador de concursos públicos brasileiros especializado em \"${subjectName}\".\n\nAvalie a seguinte resposta discursiva:\n\nQUESTÃO:\n${question}\n\nRESPOSTA DO CANDIDATO:\n${userAnswer}\n\nForneça uma avaliação detalhada no formato JSON:\n{\n  \"score\": (número de 0 a 10, com uma casa decimal),\n  \"evaluation\": \"avaliação detalhada com pontos positivos, pontos a melhorar e sugestões de estudo\"\n}\n\nSeja justo mas rigoroso como um examinador real de concurso.`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: {\n          type: \"object\",\n          properties: {\n            score: { type: \"number\" },\n            evaluation: { type: \"string\" },\n          },\n          required: [\"score\", \"evaluation\"],\n        },\n      },\n    });\n\n    const text = response.text || '{\"score\": 0, \"evaluation\": \"Erro na avaliação\"}';\n    return JSON.parse(text);\n  } catch (error) {\n    console.error(\"Error evaluating essay:\", error);\n    return { score: 0, evaluation: \"Erro ao avaliar a resposta.\" };\n  }\n}\n\nexport async function generateStudyRecommendations(\n  performanceData: { subjectName: string; averageScore: number; strengthLevel: string }[],\n  targetExam: string\n): Promise<StudyRecommendation[]> {\n  const prompt = `Você é um coach de estudos especializado em concursos públicos brasileiros.\n\nO aluno está se preparando para: ${targetExam}\n\nDados de desempenho por matéria:\n${performanceData.map(p => `- ${p.subjectName}: média ${p.averageScore.toFixed(1)}, nível ${p.strengthLevel}`).join(\"\\n\")}\n\nCom base nesses dados, gere 5 recomendações personalizadas de estudo no formato JSON:\n[\n  {\n    \"type\": \"study_focus\" | \"material\" | \"exam\",\n    \"title\": \"título curto da recomendação\",\n    \"description\": \"descrição detalhada com ações específicas\",\n    \"priority\": 1-5 (1 = mais urgente)\n  }\n]\n\nPriorize as matérias com pior desempenho e sugira estratégias práticas.`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n      config: {\n        responseMimeType: \"application/json\",\n      },\n    });\n\n    const text = response.text || \"[]\";\n    return JSON.parse(text);\n  } catch (error) {\n    console.error(\"Error generating recommendations:\", error);\n    return [];\n  }\n}\n\nexport async function summarizeMaterial(content: string, title: string): Promise<string> {\n  const prompt = `Você é um especialista em concursos públicos brasileiros. Resuma o seguinte material de estudo de forma clara e objetiva, destacando os pontos mais importantes para provas de concurso.\n\nTítulo: ${title}\n\nConteúdo:\n${content}\n\nForneça um resumo estruturado com:\n1. Pontos principais\n2. Conceitos-chave\n3. O que mais cai em provas sobre esse tema`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n    });\n\n    return response.text || \"Não foi possível gerar o resumo.\";\n  } catch (error) {\n    console.error(\"Error summarizing material:\", error);\n    return \"Erro ao gerar resumo do material.\";\n  }\n}\n\nexport async function explainQuestion(\n  question: string,\n  options: { letter: string; text: string }[] | null,\n  correctAnswer: string | null\n): Promise<string> {\n  const optionsText = options\n    ? options.map(o => `${o.letter}) ${o.text}`).join(\"\\n\")\n    : \"\";\n\n  const prompt = `Você é um professor de cursinho preparatório para concursos públicos. Explique detalhadamente a seguinte questão:\n\nQUESTÃO:\n${question}\n\n${optionsText ? `ALTERNATIVAS:\\n${optionsText}` : \"\"}\n\n${correctAnswer ? `RESPOSTA CORRETA: ${correctAnswer}` : \"\"}\n\nForneça uma explicação didática que inclua:\n1. Por que a resposta correta está certa\n2. Por que as outras alternativas estão erradas (se aplicável)\n3. Conceitos fundamentais relacionados\n4. Dicas para resolver questões similares`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n    });\n\n    return response.text || \"Não foi possível gerar a explicação.\";\n  } catch (error) {\n    console.error(\"Error explaining question:\", error);\n    return \"Erro ao gerar explicação.\";\n  }\n}\n","path":null,"size_bytes":6353,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2560,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/pages/materials.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport {\n  Upload,\n  FileText,\n  BookOpen,\n  Sparkles,\n  Trash2,\n  Search,\n  File,\n  Eye,\n  X,\n  Loader2,\n  CheckCircle2,\n} from \"lucide-react\";\nimport type { Material } from \"@shared/schema\";\n\nexport default function Materials() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: materials = [], isLoading } = useQuery<Material[]>({\n    queryKey: [\"/api/materials\"],\n  });\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const file = e.dataTransfer.files[0];\n    if (file && file.type === \"application/pdf\") {\n      setSelectedFile(file);\n    } else {\n      toast({\n        title: \"Arquivo inválido\",\n        description: \"Por favor, selecione um arquivo PDF.\",\n        variant: \"destructive\",\n      });\n    }\n  }, [toast]);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file && file.type === \"application/pdf\") {\n      setSelectedFile(file);\n    } else {\n      toast({\n        title: \"Arquivo inválido\",\n        description: \"Por favor, selecione um arquivo PDF.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile) return;\n\n    setIsUploading(true);\n    setUploadProgress(0);\n\n    const interval = setInterval(() => {\n      setUploadProgress((prev) => {\n        if (prev >= 90) {\n          clearInterval(interval);\n          return prev;\n        }\n        return prev + 10;\n      });\n    }, 200);\n\n    setTimeout(() => {\n      clearInterval(interval);\n      setUploadProgress(100);\n      setIsUploading(false);\n      setSelectedFile(null);\n      setIsUploadDialogOpen(false);\n      toast({\n        title: \"Upload concluído!\",\n        description: \"Seu material foi enviado. A IA está gerando o resumo...\",\n      });\n    }, 2500);\n  };\n\n  const generateSummaryMutation = useMutation({\n    mutationFn: async (materialId: string) => {\n      return apiRequest(\"POST\", `/api/materials/${materialId}/summary`, {});\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Resumo gerado!\",\n        description: \"O resumo do seu material está pronto.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/materials\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro ao gerar resumo\",\n        description: \"Não foi possível gerar o resumo. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredMaterials = materials.filter((material) =>\n    material.title.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-materials-title\">\n            Materiais de Estudo\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Envie seus PDFs e a IA gerará resumos automáticos.\n          </p>\n        </div>\n        <Dialog open={isUploadDialogOpen} onOpenChange={setIsUploadDialogOpen}>\n          <DialogTrigger asChild>\n            <Button className=\"gap-2\" data-testid=\"button-upload-material\">\n              <Upload className=\"h-4 w-4\" />\n              Enviar Material\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-md\">\n            <DialogHeader>\n              <DialogTitle>Enviar Material</DialogTitle>\n              <DialogDescription>\n                Arraste um arquivo PDF ou clique para selecionar.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                  isDragging\n                    ? \"border-primary bg-primary/5\"\n                    : \"border-muted-foreground/25\"\n                }`}\n              >\n                {selectedFile ? (\n                  <div className=\"space-y-2\">\n                    <File className=\"h-12 w-12 mx-auto text-primary\" />\n                    <p className=\"font-medium\">{selectedFile.name}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n                    </p>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setSelectedFile(null)}\n                      className=\"gap-1\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                      Remover\n                    </Button>\n                  </div>\n                ) : (\n                  <>\n                    <Upload className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                    <p className=\"text-muted-foreground mb-2\">\n                      Arraste seu PDF aqui ou\n                    </p>\n                    <label>\n                      <input\n                        type=\"file\"\n                        accept=\".pdf\"\n                        onChange={handleFileSelect}\n                        className=\"hidden\"\n                        data-testid=\"input-file-upload\"\n                      />\n                      <Button variant=\"outline\" asChild>\n                        <span className=\"cursor-pointer\">Selecionar arquivo</span>\n                      </Button>\n                    </label>\n                  </>\n                )}\n              </div>\n\n              {isUploading && (\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span>Enviando...</span>\n                    <span>{uploadProgress}%</span>\n                  </div>\n                  <Progress value={uploadProgress} />\n                </div>\n              )}\n\n              <div className=\"flex justify-end gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsUploadDialogOpen(false)}\n                  disabled={isUploading}\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  onClick={handleUpload}\n                  disabled={!selectedFile || isUploading}\n                  className=\"gap-2\"\n                  data-testid=\"button-confirm-upload\"\n                >\n                  {isUploading ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      Enviando...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4\" />\n                      Enviar\n                    </>\n                  )}\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n        <Input\n          placeholder=\"Buscar materiais...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"pl-9\"\n          data-testid=\"input-search-materials\"\n        />\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {filteredMaterials.map((material) => (\n          <Card key={material.id} className=\"hover-elevate\" data-testid={`card-material-${material.id}`}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start gap-3 mb-4\">\n                <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                  <FileText className=\"h-6 w-6 text-primary\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-semibold truncate\">{material.title}</h3>\n                  <p className=\"text-sm text-muted-foreground truncate\">\n                    {material.fileName}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {new Date(material.createdAt).toLocaleDateString(\"pt-BR\")}\n                  </p>\n                </div>\n              </div>\n\n              {!!material.summary && (\n                <div className=\"p-3 rounded-lg bg-muted/50 mb-4\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Sparkles className=\"h-4 w-4 text-primary\" />\n                    <span className=\"text-xs font-medium\">Resumo da IA</span>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground line-clamp-3\">\n                    {material.summary}\n                  </p>\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                {!!material.summary ? (\n                  <Button variant=\"outline\" className=\"flex-1 gap-2\" data-testid={`button-view-summary-${material.id}`}>\n                    <Eye className=\"h-4 w-4\" />\n                    Ver Resumo\n                  </Button>\n                ) : (\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1 gap-2\"\n                    onClick={() => generateSummaryMutation.mutate(material.id)}\n                    disabled={generateSummaryMutation.isPending}\n                    data-testid={`button-generate-summary-${material.id}`}\n                  >\n                    {generateSummaryMutation.isPending ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <Sparkles className=\"h-4 w-4\" />\n                    )}\n                    Gerar Resumo\n                  </Button>\n                )}\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"text-destructive\"\n                  data-testid={`button-delete-material-${material.id}`}\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {filteredMaterials.length === 0 && (\n        <Card className=\"p-12\" data-testid=\"empty-state-materials\">\n          <div className=\"text-center\">\n            <BookOpen className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Nenhum material encontrado</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              Envie seus PDFs e a IA gerará resumos automáticos para facilitar seus estudos.\n            </p>\n            <Button\n              className=\"gap-2\"\n              onClick={() => setIsUploadDialogOpen(true)}\n            >\n              <Upload className=\"h-4 w-4\" />\n              Enviar Material\n            </Button>\n          </div>\n        </Card>\n      )}\n\n      <Card className=\"border-primary/20 bg-primary/5\" data-testid=\"card-ai-info\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n              <Sparkles className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold mb-1\">Resumos Inteligentes</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Nossa IA analisa seus materiais e gera resumos claros e objetivos,\n                destacando os pontos mais importantes para seus estudos. Ideal para\n                revisões rápidas antes das provas.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":13405,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"server/stripe.ts":{"content":"import Stripe from \"stripe\";\n\nif (!process.env.STRIPE_SECRET_KEY) {\n  throw new Error(\"STRIPE_SECRET_KEY is required\");\n}\n\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);\n\nexport const SUBSCRIPTION_PLANS = {\n  free: {\n    name: \"Gratuito\",\n    price: 0,\n    simuladosLimit: 1,\n    priceId: null,\n  },\n  monthly: {\n    name: \"Mensal\",\n    price: 3900, // R$ 39,00 em centavos\n    simuladosLimit: -1, // ilimitado\n    priceId: null as string | null, // será criado dinamicamente\n  },\n  annual: {\n    name: \"Anual\",\n    price: 22800, // R$ 228,00/ano (R$ 19/mês x 12)\n    priceId: null as string | null,\n    simuladosLimit: -1,\n  },\n};\n\nlet stripeProductId: string | null = null;\nlet monthlyPriceId: string | null = null;\nlet annualPriceId: string | null = null;\n\nexport async function ensureStripeProductsExist() {\n  // Buscar ou criar produto\n  const products = await stripe.products.list({ limit: 100 });\n  let product = products.data.find(p => p.name === \"ConcurseIA Pro\");\n  \n  if (!product) {\n    product = await stripe.products.create({\n      name: \"ConcurseIA Pro\",\n      description: \"Acesso ilimitado a simulados, questões e recomendações de estudo com IA\",\n    });\n  }\n  stripeProductId = product.id;\n\n  // Buscar ou criar preço mensal\n  const prices = await stripe.prices.list({ product: product.id, limit: 100 });\n  \n  let monthlyPrice = prices.data.find(\n    p => p.recurring?.interval === \"month\" && p.unit_amount === 3900 && p.active\n  );\n  if (!monthlyPrice) {\n    monthlyPrice = await stripe.prices.create({\n      product: product.id,\n      unit_amount: 3900,\n      currency: \"brl\",\n      recurring: { interval: \"month\" },\n      nickname: \"Plano Mensal\",\n    });\n  }\n  monthlyPriceId = monthlyPrice.id;\n  SUBSCRIPTION_PLANS.monthly.priceId = monthlyPrice.id;\n\n  // Buscar ou criar preço anual\n  let annualPrice = prices.data.find(\n    p => p.recurring?.interval === \"year\" && p.unit_amount === 22800 && p.active\n  );\n  if (!annualPrice) {\n    annualPrice = await stripe.prices.create({\n      product: product.id,\n      unit_amount: 22800,\n      currency: \"brl\",\n      recurring: { interval: \"year\" },\n      nickname: \"Plano Anual\",\n    });\n  }\n  annualPriceId = annualPrice.id;\n  SUBSCRIPTION_PLANS.annual.priceId = annualPrice.id;\n\n  console.log(\"Stripe products initialized:\", {\n    productId: stripeProductId,\n    monthlyPriceId,\n    annualPriceId,\n  });\n}\n\nexport function getMonthlyPriceId() {\n  return monthlyPriceId;\n}\n\nexport function getAnnualPriceId() {\n  return annualPriceId;\n}\n\nexport function getProductId() {\n  return stripeProductId;\n}\n","path":null,"size_bytes":2591,"size_tokens":null},"client/src/pages/exam-create.tsx":{"content":"import { useState, type ComponentType } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useLocation, Link } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Slider } from \"@/components/ui/slider\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport {\n  FileText,\n  Upload,\n  BookOpen,\n  Sparkles,\n  ArrowRight,\n  ArrowLeft,\n  Check,\n  Loader2,\n  Lock,\n  CreditCard,\n  PenLine,\n  Calculator,\n  Scale,\n  ClipboardList,\n  Monitor,\n  Brain,\n  Newspaper,\n  ShieldAlert,\n} from \"lucide-react\";\nimport type { Subject } from \"@shared/schema\";\n\nconst examSchema = z.object({\n  title: z.string().min(3, \"Título deve ter pelo menos 3 caracteres\"),\n  description: z.string().optional(),\n  questionCount: z.number().min(5).max(100),\n  timeLimit: z.number().min(10).max(300),\n  difficulty: z.string(),\n  subjectIds: z.array(z.string()).min(1, \"Selecione pelo menos uma área\"),\n});\n\ntype ExamFormData = z.infer<typeof examSchema>;\n\nconst subjectIcons: Record<string, ComponentType<{ className?: string }>> = {\n  \"Português\": PenLine,\n  \"Matemática\": Calculator,\n  \"Direito Constitucional\": Scale,\n  \"Direito Administrativo\": ClipboardList,\n  \"Informática\": Monitor,\n  \"Raciocínio Lógico\": Brain,\n  \"Atualidades\": Newspaper,\n  \"Direito Penal\": ShieldAlert,\n};\n\ninterface SubscriptionLimits {\n  canCreate: boolean;\n  remaining: number;\n  limit: number;\n  used: number;\n}\n\nexport default function ExamCreate() {\n  const [step, setStep] = useState(1);\n  const [selectedSubjects, setSelectedSubjects] = useState<string[]>([]);\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: limits, isLoading: limitsLoading } = useQuery<SubscriptionLimits>({\n    queryKey: [\"/api/subscription/can-create-exam\"],\n  });\n\n  const { data: subjects = [], isLoading: subjectsLoading } = useQuery<Subject[]>({\n    queryKey: [\"/api/subjects\"],\n  });\n\n  const form = useForm<ExamFormData>({\n    resolver: zodResolver(examSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      questionCount: 20,\n      timeLimit: 60,\n      difficulty: \"medium\",\n      subjectIds: [],\n    },\n  });\n\n  const createExamMutation = useMutation({\n    mutationFn: async (data: ExamFormData) => {\n      return apiRequest(\"POST\", \"/api/exams\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Simulado criado!\",\n        description: \"Seu simulado foi gerado com sucesso.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/exams\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/subscription/can-create-exam\"] });\n      navigate(\"/exams\");\n    },\n    onError: (error: any) => {\n      const message = error?.message || \"Não foi possível criar o simulado. Tente novamente.\";\n      if (message.includes(\"Limite\")) {\n        toast({\n          title: \"Limite atingido\",\n          description: \"Você atingiu o limite do plano gratuito. Assine para criar mais simulados.\",\n          variant: \"destructive\",\n        });\n        queryClient.invalidateQueries({ queryKey: [\"/api/subscription/can-create-exam\"] });\n      } else {\n        toast({\n          title: \"Erro ao criar\",\n          description: message,\n          variant: \"destructive\",\n        });\n      }\n    },\n  });\n\n  const handleSubjectToggle = (subjectId: string) => {\n    setSelectedSubjects((prev) => {\n      const newSelection = prev.includes(subjectId)\n        ? prev.filter((id) => id !== subjectId)\n        : [...prev, subjectId];\n      form.setValue(\"subjectIds\", newSelection);\n      return newSelection;\n    });\n  };\n\n  const nextStep = () => {\n    if (step === 1 && selectedSubjects.length === 0) {\n      toast({\n        title: \"Selecione as áreas\",\n        description: \"Escolha pelo menos uma área de conhecimento.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    setStep((prev) => Math.min(prev + 1, 3));\n  };\n\n  const prevStep = () => setStep((prev) => Math.max(prev - 1, 1));\n\n  const onSubmit = (data: ExamFormData) => {\n    createExamMutation.mutate(data);\n  };\n\n  if (limitsLoading || subjectsLoading) {\n    return (\n      <div className=\"max-w-3xl mx-auto space-y-6\">\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (limits && !limits.canCreate) {\n    return (\n      <div className=\"max-w-3xl mx-auto space-y-6\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-create-exam-title\">\n            Criar Novo Simulado\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Configure seu simulado personalizado em poucos passos.\n          </p>\n        </div>\n\n        <Card className=\"border-destructive/50\" data-testid=\"card-limit-reached\">\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"h-16 w-16 rounded-full bg-destructive/10 flex items-center justify-center\">\n                <Lock className=\"h-8 w-8 text-destructive\" />\n              </div>\n            </div>\n            <h2 className=\"text-xl font-semibold mb-2\">Limite de Simulados Atingido</h2>\n            <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n              Voce ja criou {limits.used} de {limits.limit} simulado(s) permitido(s) no plano gratuito. \n              Assine um plano para criar simulados ilimitados.\n            </p>\n            <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3\">\n              <Link href=\"/subscription\">\n                <Button className=\"gap-2\" data-testid=\"button-upgrade\">\n                  <CreditCard className=\"h-4 w-4\" />\n                  Ver Planos\n                </Button>\n              </Link>\n              <Link href=\"/exams\">\n                <Button variant=\"outline\" data-testid=\"button-view-exams\">\n                  Ver Meus Simulados\n                </Button>\n              </Link>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto space-y-6\">\n      <div>\n        <h1 className=\"text-2xl md:text-3xl font-bold\" data-testid=\"text-create-exam-title\">\n          Criar Novo Simulado\n        </h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Configure seu simulado personalizado em poucos passos.\n        </p>\n      </div>\n\n      <div className=\"flex items-center gap-2 mb-8\">\n        {[1, 2, 3].map((s) => (\n          <div key={s} className=\"flex items-center flex-1\">\n            <div\n              className={`flex items-center justify-center w-10 h-10 rounded-full border-2 font-semibold transition-colors ${\n                step >= s\n                  ? \"bg-primary border-primary text-primary-foreground\"\n                  : \"border-muted-foreground/30 text-muted-foreground\"\n              }`}\n            >\n              {step > s ? <Check className=\"h-5 w-5\" /> : s}\n            </div>\n            {s < 3 && (\n              <div\n                className={`flex-1 h-1 mx-2 rounded ${\n                  step > s ? \"bg-primary\" : \"bg-muted\"\n                }`}\n              />\n            )}\n          </div>\n        ))}\n      </div>\n\n      <Form {...form}>\n        <form onSubmit={form.handleSubmit(onSubmit)}>\n          {step === 1 && (\n            <Card data-testid=\"card-step-1\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BookOpen className=\"h-5 w-5 text-primary\" />\n                  Selecione as Áreas\n                </CardTitle>\n                <CardDescription>\n                  Escolha as áreas de conhecimento que deseja incluir no simulado.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                  {subjects.map((subject) => {\n                    const IconComponent = subjectIcons[subject.name] || BookOpen;\n                    return (\n                      <div\n                        key={subject.id}\n                        onClick={() => handleSubjectToggle(subject.id)}\n                        className={`p-4 rounded-lg border cursor-pointer transition-all hover-elevate ${\n                          selectedSubjects.includes(subject.id)\n                            ? \"border-primary bg-primary/5\"\n                            : \"border-border\"\n                        }`}\n                        data-testid={`subject-${subject.id}`}\n                      >\n                        <div className=\"text-center\">\n                          <div className=\"flex justify-center mb-2\">\n                            <IconComponent className=\"h-6 w-6 text-muted-foreground\" />\n                          </div>\n                          <div className=\"text-sm font-medium\">{subject.name}</div>\n                          {selectedSubjects.includes(subject.id) && (\n                            <Check className=\"h-4 w-4 text-primary mx-auto mt-2\" />\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n\n                {selectedSubjects.length > 0 && (\n                  <div className=\"mt-6 p-4 rounded-lg bg-muted/50\">\n                    <p className=\"text-sm font-medium mb-2\">Áreas selecionadas:</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {selectedSubjects.map((id) => {\n                        const subject = subjects.find((s) => s.id === id);\n                        if (!subject) return null;\n                        const IconComponent = subjectIcons[subject.name] || BookOpen;\n                        return (\n                          <Badge key={id} variant=\"secondary\" className=\"gap-1\">\n                            <IconComponent className=\"h-3 w-3\" />\n                            {subject.name}\n                          </Badge>\n                        );\n                      })}\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          )}\n\n          {step === 2 && (\n            <Card data-testid=\"card-step-2\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5 text-primary\" />\n                  Configure o Simulado\n                </CardTitle>\n                <CardDescription>\n                  Defina as características do seu simulado.\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <FormField\n                  control={form.control}\n                  name=\"title\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Título do Simulado</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder=\"Ex: Simulado para TRF - Área Administrativa\"\n                          {...field}\n                          data-testid=\"input-exam-title\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"description\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Descrição (opcional)</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          placeholder=\"Adicione uma descrição para o simulado...\"\n                          className=\"resize-none\"\n                          {...field}\n                          data-testid=\"textarea-exam-description\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"questionCount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Quantidade de Questões: {field.value}</FormLabel>\n                      <FormControl>\n                        <Slider\n                          min={5}\n                          max={100}\n                          step={5}\n                          value={[field.value]}\n                          onValueChange={(value) => field.onChange(value[0])}\n                          data-testid=\"slider-question-count\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        Escolha entre 5 e 100 questões\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"timeLimit\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tempo Limite: {field.value} minutos</FormLabel>\n                      <FormControl>\n                        <Slider\n                          min={10}\n                          max={300}\n                          step={10}\n                          value={[field.value]}\n                          onValueChange={(value) => field.onChange(value[0])}\n                          data-testid=\"slider-time-limit\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        Defina o tempo máximo para completar o simulado\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"difficulty\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nível de Dificuldade</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-difficulty\">\n                            <SelectValue placeholder=\"Selecione a dificuldade\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"easy\">Fácil</SelectItem>\n                          <SelectItem value=\"medium\">Médio</SelectItem>\n                          <SelectItem value=\"hard\">Difícil</SelectItem>\n                          <SelectItem value=\"mixed\">Misto</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n          )}\n\n          {step === 3 && (\n            <Card data-testid=\"card-step-3\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Sparkles className=\"h-5 w-5 text-primary\" />\n                  Confirmar e Gerar\n                </CardTitle>\n                <CardDescription>\n                  Revise as configurações e gere seu simulado.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"p-4 rounded-lg border\">\n                    <h4 className=\"font-medium mb-3\">Resumo do Simulado</h4>\n                    <div className=\"grid gap-3 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Título:</span>\n                        <span className=\"font-medium\">{form.watch(\"title\") || \"Não definido\"}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Questões:</span>\n                        <span className=\"font-medium\">{form.watch(\"questionCount\")}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Tempo:</span>\n                        <span className=\"font-medium\">{form.watch(\"timeLimit\")} minutos</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Dificuldade:</span>\n                        <span className=\"font-medium capitalize\">{form.watch(\"difficulty\")}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-4 rounded-lg border\">\n                    <h4 className=\"font-medium mb-3\">Áreas Selecionadas</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {selectedSubjects.map((id) => {\n                        const subject = subjects.find((s) => s.id === id);\n                        if (!subject) return null;\n                        const IconComponent = subjectIcons[subject.name] || BookOpen;\n                        return (\n                          <Badge key={id} variant=\"secondary\" className=\"gap-1\">\n                            <IconComponent className=\"h-3 w-3\" />\n                            {subject.name}\n                          </Badge>\n                        );\n                      })}\n                    </div>\n                  </div>\n\n                  <div className=\"p-4 rounded-lg bg-primary/5 border border-primary/20\">\n                    <div className=\"flex items-start gap-3\">\n                      <Sparkles className=\"h-5 w-5 text-primary mt-0.5\" />\n                      <div>\n                        <h4 className=\"font-medium\">IA Adaptativa Ativada</h4>\n                        <p className=\"text-sm text-muted-foreground mt-1\">\n                          As questões serão selecionadas com base no seu histórico de desempenho\n                          para maximizar seu aprendizado.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"flex justify-between mt-6\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={prevStep}\n              disabled={step === 1}\n              className=\"gap-2\"\n              data-testid=\"button-prev-step\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              Voltar\n            </Button>\n\n            {step < 3 ? (\n              <Button\n                type=\"button\"\n                onClick={nextStep}\n                className=\"gap-2\"\n                data-testid=\"button-next-step\"\n              >\n                Próximo\n                <ArrowRight className=\"h-4 w-4\" />\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                className=\"gap-2\"\n                disabled={createExamMutation.isPending}\n                data-testid=\"button-create-exam-submit\"\n              >\n                {createExamMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    Gerando...\n                  </>\n                ) : (\n                  <>\n                    <Sparkles className=\"h-4 w-4\" />\n                    Gerar Simulado\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n        </form>\n      </Form>\n    </div>\n  );\n}\n","path":null,"size_bytes":20849,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null}},"version":2}